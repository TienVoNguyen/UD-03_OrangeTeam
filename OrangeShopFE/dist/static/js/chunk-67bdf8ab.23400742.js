(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-67bdf8ab"],{"339a":function(e,t,a){},a1a4:function(e,t,a){"use strict";a("f1f4")},b4a5:function(e,t,a){"use strict";t["a"]={data:function(){return{pagination:{pageNumber:1,pageSize:10,totalItems:0,totalPages:0},pageSizes:[10,20,50,100]}},methods:{}}},df4e:function(e,t,a){"use strict";a("339a")},f1f4:function(e,t,a){},f9c5:function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e._self._c;return t("div",{staticClass:"fluid-container mx-5 mt-1"},[t("el-tabs",{ref:"eltab",staticClass:"vh-90",attrs:{stretch:!0},on:{"tab-click":e.handleClickTab},model:{value:e.activeName,callback:function(t){e.activeName=t},expression:"activeName"}},[t("el-tab-pane",{attrs:{label:"Chỉ tiêu tài chính",name:"financialNorm"}},[t("div",{staticClass:"d-block float-right pb-5"},[t("el-button",{attrs:{type:"css-success"},on:{click:e.exportData}},[e._v("EXPORT")])],1),t("custom-table-vue",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],attrs:{"table-data":e.tableData,"table-header":e.financialNormHeader,height:e.tableHeight},on:{filter:e.handleFilter}})],1),t("el-tab-pane",{attrs:{label:"Exception Type",name:"exceptionType"}},[t("div",{staticClass:"d-block float-right pb-5"},[t("el-button",{attrs:{type:"css-success"},on:{click:e.exportExceptionData}},[e._v("EXPORT")])],1),t("custom-table-vue",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],attrs:{"table-data":e.tableData,"table-header":e.excTypeHeader,height:e.tableHeight},on:{filter:e.handleFilter}})],1)],1)],1)},i=[],r=a("5530"),c=a("c7eb"),l=a("1da1"),o=(a("b0c0"),a("4de4"),a("d3b7"),a("3ca3"),a("ddb0"),a("2b3d"),a("9861"),function(){var e=this,t=e._self._c;return t("el-table",{attrs:{data:e.tableData,border:"",stripe:"",height:e.height-30}},e._l(e.tableHeader,(function(a){return t("el-table-column",{key:a.prop,attrs:{prop:a.prop,label:a.label,"render-header":e.customizeHeader,"min-width":a.width,"show-overflow-tooltip":!0}})})),1)}),s=[],u=(a("a9e3"),a("159b"),a("ac1f"),a("841c"),a("2ef0")),d={name:"CustomTable",props:{tableData:{type:Array,default:function(){return[]}},tableHeader:{type:Array,default:function(){return[]}},height:{type:Number,default:0},loading:{type:Boolean,default:!0}},data:function(){return{search:{},count:0}},watch:{search:{handler:function(e){this.handleInputChange(e)},deep:!0}},created:function(){var e=this;this.tableHeader.forEach((function(t){e.$set(e.search,t.prop,"")}))},methods:{handleInputChange:u["debounce"]((function(e){this.$emit("filter",e)}),600),customizeHeader:function(e,t){var a=this,n=(t.column,t.$index),i=this.$createElement,r=this.$props.tableHeader[n];return i("div",[i("div",{class:"d-block c-header text-center"},[i("span",[r.label])]),r.hasSearch?i("el-input",{attrs:{"suffix-icon":"el-icon-search",placeholder:"Tìm kiếm",input:this.handleInputChange},model:{value:a.search[r.prop],callback:function(e){a.$set(a.search,r.prop,e)}}}):i("div",[" ",i("div",{style:"height: 36px"})," "])])},handleEvent:function(e,t){}}},h=d,b=(a("df4e"),a("2877")),p=Object(b["a"])(h,o,s,!1,null,"727ea5cc",null),f=p.exports,m={data:function(){return{tableData:[],financialNormHeader:[{label:"Chỉ tiêu",prop:"variable",width:"25%",hasSearch:!0},{label:"Mã số năm",prop:"varCode",width:"8%",hasSearch:!0},{label:"Rule",prop:"rule",width:"60%"},{label:"Exc Type",prop:"exceptionCode",width:"7%"}],excTypeHeader:[{label:"Exc Type",prop:"code",width:"25%",hasSearch:!0},{label:"Rule",prop:"description",width:"75%"}]}}},v=a("b4a5"),g=a("b775");function w(e){return Object(g["a"])({url:"/variables",method:"get",params:e})}function x(e){return Object(g["a"])({url:"/variables/exception",method:"get",params:e})}function N(e){return Object(g["a"])({url:"/variables/export",method:"post",data:e,responseType:"blob"})}function T(e){return Object(g["a"])({url:"/variables/exception/export",method:"post",data:e,responseType:"blob"})}var y={name:"FinancialNorm",components:{CustomTableVue:f},mixins:[m,v["a"]],data:function(){return{activeName:"financialNorm",tableHeight:0,filter:{variable:"",varCode:"",preVarCode:""},loading:!0}},created:function(){var e=this;return Object(l["a"])(Object(c["a"])().mark((function t(){return Object(c["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.fetchDataTable();case 2:e.tableHeight=e.calculateHeightTable();case 3:case"end":return t.stop()}}),t)})))()},mounted:function(){window.addEventListener("resize",this.handleResize)},methods:{handleSizeChange:function(e){console.log("".concat(e," items per page"))},handleCurrentChange:function(e){console.log("current page: ".concat(e))},handleClickTab:function(e,t){this.activeName=e.$props.name,this.fetchDataTable()},convertTypeOfTab:function(e){switch(e){case"financialNorm":return 4;default:return 4}},handleResize:function(){this.tableHeight=this.calculateHeightTable()},calculateHeightTable:function(){var e=this.$refs.eltab.$el.clientHeight,t=this.$refs.eltab.$el.children[0].clientHeight,a=this.$refs.eltab.$el.children[1].children[0].children[0].clientHeight;return e-t-a},fetchDataTable:function(){var e=this;return Object(l["a"])(Object(c["a"])().mark((function t(){var a,n,i;return Object(c["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:e.loading=!0,t.t0=e.activeName,t.next="financialNorm"===t.t0?4:"exceptionType"===t.t0?8:12;break;case 4:return t.next=6,w(Object(r["a"])({type:e.convertTypeOfTab(e.activeName)},e.filter));case 6:return i=t.sent,t.abrupt("break",12);case 8:return t.next=10,x(Object(r["a"])({type:e.convertTypeOfTab(e.activeName)},e.filter));case 10:return i=t.sent,t.abrupt("break",12);case 12:e.tableData=null===(a=i)||void 0===a||null===(n=a.data)||void 0===n?void 0:n.result,e.loading=!1;case 14:case"end":return t.stop()}}),t)})))()},handleFilter:function(e){this.filter=Object(r["a"])({},e),this.fetchDataTable()},getHeaderByNameTab:function(e){switch(e){case"financialNorm":return this.financialNormHeader;case"exceptionType":return this.excTypeHeader;default:return this.financialNormHeader}},getNameFileByNameTab:function(e){switch(e){case"financialNorm":return"Chỉ tiêu tài chính";case"exceptionType":return"Exception Type";default:return"Chỉ tiêu tài chính"}},exportData:function(){var e=this;return Object(l["a"])(Object(c["a"])().mark((function t(){var a;return Object(c["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,N({type:e.convertTypeOfTab(e.activeName),fileName:"".concat(e.getNameFileByNameTab(e.activeName),".csv"),headers:e.getHeaderByNameTab(e.activeName)});case 2:a=t.sent,e.dowloadFile(a);case 4:case"end":return t.stop()}}),t)})))()},exportExceptionData:function(){var e=this;return Object(l["a"])(Object(c["a"])().mark((function t(){var a;return Object(c["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,T({fileName:"".concat(e.getNameFileByNameTab(e.activeName),".csv"),headers:e.getHeaderByNameTab(e.activeName)});case 2:a=t.sent,e.dowloadFile(a);case 4:case"end":return t.stop()}}),t)})))()},dowloadFile:function(e){var t=window.URL.createObjectURL(new Blob([e])),a=document.createElement("a");a.href=t,a.setAttribute("download","".concat(this.getNameFileByNameTab(this.activeName),".csv")),document.body.appendChild(a),a.click(),document.body.removeChild(a),window.URL.revokeObjectURL(t)}}},O=y,H=(a("a1a4"),Object(b["a"])(O,n,i,!1,null,"2111b6b8",null));t["default"]=H.exports}}]);