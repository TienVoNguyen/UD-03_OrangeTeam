(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-d4319a40"],{1456:function(e,t,a){"use strict";a("a8c9")},"1ca3":function(e,t,a){"use strict";a("e698")},3081:function(e,t,a){"use strict";var n=a("5530"),l=(a("d3b7"),a("25f0"),a("4c93")),i=a("7bb1");Object(i["c"])("required",Object(n["a"])(Object(n["a"])({},l["c"]),{},{message:" bắt buộc nhập"})),Object(i["c"])("requiredSelect",Object(n["a"])(Object(n["a"])({},l["c"]),{},{message:" bắt buộc chọn"})),Object(i["c"])("ext",Object(n["a"])(Object(n["a"])({},l["a"]),{},{message:" không đúng định dạng"})),Object(i["c"])("regex",Object(n["a"])(Object(n["a"])({},l["b"]),{},{message:" không đúng định dạng"})),Object(i["c"])("max",{validate:function(e,t){return e.toString().length<=t.length},params:["length"],message:" không vượt quá {length} ký tự"}),Object(i["c"])("isLower",{params:["target"],validate:function(e,t){var a=t.target;return!a||+e<+a},message:" phải nhỏ hơn chặn trên"}),t["a"]={data:function(){return{loginFields:{username:"Tên đăng nhập",password:"Mật khẩu"},approverFields:{unit:"Đơn vị",position:"Chức vụ",approver:"Họ và tên"},scorePeriodFields:{name:"Kỳ chấm điểm"},lendingFields:{type:"Loại chấm điểm",name:"Loại hình chấm điểm"},systemFields:{dept1:"Đơn vị",dept1_type:"Loại đơn vị",dept2:"Phòng ban",side:"Miền",name:"Tên",status:"Trạng thái",code:"Mã",position:"Chức vụ",file:"File"},customer_identificationFields:{code_tax:"Mã số thuế",code_reg:"Mã số đăng ký kinh doanh",name_dn:"Tên doanh nghiệp",name_dept:"Tên đơn vị quản lý",code_dept:"Mã đơn vị quản lý"},rank_adjustFields:{rule_change:"Quy tắc điều chỉnh",cause_change:"Nguyên nhân điều chỉnh",reason_change:"Lý do điều chỉnh"},functionsName:{title:"Tiêu đề",path:"Path",icon:"Icon",component:"Mã màn hình",priority:"Thứ tự"},economic_sbvFields:{codeSBV:"Mã ngành kinh tế SBV",nameSBV:"Tên ngành kinh tế SBV",requestChange:"Yêu cầu điều chỉnh",file:"File"},groupFCCFields:{code:"Mã ngành kinh tế FCC",name:"Tên ngành kinh tế FCC",sbv:"Ngành kinh tế SBV",css:"Nhóm ngành"},groupFCCImportFields:{file:"File"},matrixClassifyFields:{nameMatrix:"Tên ma trận",rules:"Loại quy tắc phân loại quy mô",tpBankRule:"Quy tắc phân loại TPBank",pointRule:"Quy tắc phân loại theo điểm chỉ tiêu",establishMatrix:"Thiết lập ma trận",requestChangeMatrix:"Lý do từ chối"},tpBankRuleFields:{name:"Tên quy tắc",unit:"Đơn vị báo cáo tài chính",sales:"Doanh thu",salesCriteria:"Doanh thu - Chọn tiêu chí",equity:"Vốn chủ sở hữu",equityCriteria:"Vốn chủ sở hữu - Chọn tiêu chí",configScalePointList:"Thiết lập điểm quy mô"},salesScalePointFields:{fromSign:"Dấu",fromValue:"Chặn dưới",toValue:"Chặn trên",toSign:"Dấu"},equityScalePointFields:{fromSign:"Dấu",fromValue:"Chặn dưới",toValue:"Chặn trên",toSign:"Dấu"},configScalePointFields:{size:"Size",scale:"Quy mô"},branches:{branchCode:"Mã đơn vị",branchCodeNumber:"Mã số đơn vị",branchTypeName:"Loại đơn vị",branchName:"Tên đơn vị",districtName:"Miền"},departments:{branchName:"Tên đơn vị",name:"Tên phòng ban"},positions:{branchName:"Tên đơn vị",name:"Tên chức vụ",departmentName:"Tên phòng ban"},groups:{name:"Tên nhóm",code:"Mã nhóm"},users:{groupName:"Tên nhóm",username:"Tên đăng nhập",name:"Tên nhân viên"},ruleChangeRankFields:{content:"Lý do"},singleScoringModelKHDNFields:{codeModel:"Mã mô hình đơn",nameModel:"Tên mô hình đơn",typeRank:"Loại xếp hạng",scaleClassify:"Phân loại quy mô",industryGroup:"Nhóm ngành",inputModel:"Tên mô hình nhập liệu",typeCode:"Loại code",fileCodeModel:"File code model",fileImport:"File",userCreated:"Người tạo",userApproved:"Người duyệt"},configParameterPropertyFields:{codeProperty:"Mã thuộc tính",nameProperty:"Tên thuộc tính",description:"Mô tả",file:"File"}}},methods:{messageError:function(e,t){if(void 0!==t)return e+t}}}},"386b":function(e,t,a){"use strict";a("c76b")},"391d":function(e,t,a){"use strict";var n=a("b4a5"),l={data:function(){return{loading:null}},methods:{showLoading:function(){var e=this;this.loading=this.$loading({lock:!0,text:"Đang tải"}),setTimeout((function(){e.hideLoading()}),5e4)},hideLoading:function(){this.loading.close()}}},i={data:function(){return{duration:3e3}},methods:{notifySuccess:function(e,t){this.$notify({title:e,message:t,type:"success",duration:this.duration,customClass:"loading-backgroup-success"})},notifyWarning:function(e,t){this.$notify({title:e,message:t,type:"warning",duration:this.duration,customClass:"loading-backgroup-warning"})},notifyInfo:function(e,t){this.$notify({title:e,message:t,type:"info",duration:this.duration,customClass:"loading-backgroup-info"})},notifyError:function(e,t){this.$notify({title:e,message:t,type:"error",duration:this.duration,customClass:"loading-backgroup-error"})}}},r=(a("d3b7"),a("25f0"),{data:function(){return{}},methods:{convertDateToServer:function(e,t){return""===e||void 0===e||null==e?"":this.$moment(e,t).tz(this.$moment.tz.guess(!0)).utc().format()},convertDateToLocal:function(e,t){return""===e||void 0===e||null==e?"":this.$moment.utc(e).parseZone(this.$moment.tz.guess(!0)).local().format(t)},convertDateToLocalUTC:function(e,t){return""===e||void 0===e||null==e?"":this.$moment.utc(e).format(t)},convertDateToAnotherFormat:function(e,t,a){return""===e||void 0===e?"":this.$moment(e,t).format(a)},ConvertTimeRanges:function(e){if(null!=e&&e.toString().length>0){var t=e.split(" to ");return this.TimeRangesModel.from=this.convertDateToAnotherFormat(t[0]+" 00:00:00","DD-MM-YYYY HH:mm:ss","YYYY-MM-DD[T]HH:mm:ss[Z]"),this.TimeRangesModel.to=this.convertDateToAnotherFormat(t[1]+" 23:59:59","DD-MM-YYYY HH:mm:ss","YYYY-MM-DD[T]HH:mm:ss[Z]"),this.TimeRangesModel}return this.TimeRangesModel.to=null,this.TimeRangesModel.from=null,this.TimeRangesModel},ConvertTimeFrom:function(e){return this.convertDateToAnotherFormat(e+" 00:00:00","DD-MM-YYYY HH:mm:ss","YYYY-MM-DD[T]HH:mm:ss[Z]")},ConvertTimeTo:function(e){return this.convertDateToAnotherFormat(e+" 23:59:59","DD-MM-YYYY HH:mm:ss","YYYY-MM-DD[T]HH:mm:ss[Z]")},ConvertTimeFromToDateJava:function(e){return e+" 00:00:00"},ConvertTimeToToDateJava:function(e){return e+" 23:59:59"}}}),s={methods:{hasPermission:function(e,t){return-1!==this.$store.getters.actions[null===e||void 0===e?void 0:e.toLowerCase()].indexOf(t)}}};t["a"]={mixins:[n["a"],l,i,r,s]}},"4c1f":function(e,t,a){},5371:function(e,t,a){"use strict";a.r(t);a("b0c0");var n=function(){var e=this,t=e._self._c;return t("div",{staticClass:"app-container"},[t("ValidationObserver",{ref:"observer",scopedSlots:e._u([{key:"default",fn:function(a){var n=a.handleSubmit;return[t("el-form",{ref:"ruleTPBankForm",attrs:{"label-position":"left"}},[t("div",{staticClass:"row"},[t("div",{staticClass:"col-4"},[t("ValidationProvider",{attrs:{name:"name",rules:{required:!0,max:100}},scopedSlots:e._u([{key:"default",fn:function(a){var n=a.errors;return[t("el-form-item",{attrs:{prop:"name",error:e.messageError(e.tpBankRuleFields.name,n[0])}},[t("label",{attrs:{for:"name"}},[e._v("Tên quy tắc "),t("span",{staticClass:"text-danger"},[e._v("*")])]),t("el-input",{ref:"name",staticClass:"form-control non-border",attrs:{id:"name",disabled:e.isDisabled||!e.canEdit(),placeholder:"Nhập tên quy tắc"},model:{value:e.tpBankRule.name,callback:function(t){e.$set(e.tpBankRule,"name",t)},expression:"tpBankRule.name"}})],1)]}}],null,!0)})],1),t("div",{staticClass:"col-4"}),t("div",{staticClass:"col-4"},[t("el-form-item",{attrs:{prop:"unit"}},[t("label",{attrs:{for:"unit"}},[e._v("Đơn vị BCTC "),t("span",{staticClass:"text-danger"},[e._v("*")])]),t("el-input",{ref:"unit",staticClass:"form-control non-border",attrs:{id:"unit",value:"Triệu đồng",disabled:"",placeholder:"Nhập đơn vị BCTC"}})],1)],1)]),t("div",{staticClass:"row"},[t("div",{staticClass:"col-4"},[t("ValidationProvider",{attrs:{name:"sales",rules:{required:!0}},scopedSlots:e._u([{key:"default",fn:function(a){var n=a.errors;return[t("el-form-item",{attrs:{prop:"sales",error:e.messageError(e.tpBankRuleFields.sales,n[0])}},[t("label",{attrs:{for:"sales"}},[e._v("Doanh thu "),t("span",{staticClass:"text-danger"},[e._v("*")])]),t("el-select",{staticClass:"form-control non-border",attrs:{id:"sales",disabled:e.isDisabled||!e.canEdit(),placeholder:"Chọn nguồn liên kết dữ liệu"},model:{value:e.tpBankRule.sales,callback:function(t){e.$set(e.tpBankRule,"sales",t)},expression:"tpBankRule.sales"}},[t("el-option",{attrs:{label:"Thông tin chung",value:1}}),t("el-option",{attrs:{label:"Báo cáo kết quả kinh doanh",value:2}}),t("el-option",{attrs:{label:"Bảng cân đối kế toán",value:3}})],1)],1)]}}],null,!0)})],1),t("div",{staticClass:"col-4"}),t("div",{staticClass:"col-4"},[t("ValidationProvider",{attrs:{name:"sales_criteria",rules:{required:!0}},scopedSlots:e._u([{key:"default",fn:function(a){var n=a.errors;return[t("el-form-item",{attrs:{prop:"sales_criteria",error:e.messageError(e.tpBankRuleFields.salesCriteria,n[0])}},[t("label",{attrs:{for:"sales_criteria"}}),t("el-select",{staticClass:"form-control non-border",attrs:{id:"sales_criteria",disabled:e.isDisabled||!e.canEdit(),multiple:"",placeholder:"Chọn tiêu chí liên kết dữ liệu"},model:{value:e.tpBankRule.salesCriteria,callback:function(t){e.$set(e.tpBankRule,"salesCriteria",t)},expression:"tpBankRule.salesCriteria"}},[t("el-option",{attrs:{label:"PL_0001C - Doanh thu bán hàng và cung cấp dịch vụ",value:1}}),t("el-option",{attrs:{label:"PL_0002C - Doanh thu bán hàng và cung cấp dịch vụ",value:2}}),t("el-option",{attrs:{label:"PL_0003C - Doanh thu bán hàng và cung cấp dịch vụ",value:3}})],1)],1)]}}],null,!0)})],1)]),t("div",{staticClass:"row"},[t("div",{staticClass:"col-4"},[t("ValidationProvider",{attrs:{name:"equity",rules:{required:!0}},scopedSlots:e._u([{key:"default",fn:function(a){var n=a.errors;return[t("el-form-item",{attrs:{prop:"equity",error:e.messageError(e.tpBankRuleFields.equity,n[0])}},[t("label",{attrs:{for:"equity"}},[e._v("Vốn chủ sở hữu "),t("span",{staticClass:"text-danger"},[e._v("*")])]),t("el-select",{staticClass:"form-control non-border",attrs:{id:"equity",disabled:e.isDisabled||!e.canEdit(),placeholder:"Chọn nguồn liên kết dữ liệu"},model:{value:e.tpBankRule.equity,callback:function(t){e.$set(e.tpBankRule,"equity",t)},expression:"tpBankRule.equity"}},[t("el-option",{attrs:{label:"Thông tin chung",value:1}}),t("el-option",{attrs:{label:"Báo cáo kết quả kinh doanh",value:2}}),t("el-option",{attrs:{label:"Bảng cân đối kế toán",value:3}})],1)],1)]}}],null,!0)})],1),t("div",{staticClass:"col-4"}),t("div",{staticClass:"col-4"},[t("ValidationProvider",{attrs:{name:"equity_criteria",rules:{required:!0}},scopedSlots:e._u([{key:"default",fn:function(a){var n=a.errors;return[t("el-form-item",{attrs:{prop:"equity_criteria",error:e.messageError(e.tpBankRuleFields.equityCriteria,n[0])}},[t("label",{attrs:{for:"equity_criteria"}}),t("el-select",{staticClass:"form-control non-border",attrs:{id:"equity_criteria",disabled:e.isDisabled||!e.canEdit(),multiple:"",placeholder:"Chọn tiêu chí liên kết dữ liệu"},model:{value:e.tpBankRule.equityCriteria,callback:function(t){e.$set(e.tpBankRule,"equityCriteria",t)},expression:"tpBankRule.equityCriteria"}},[t("el-option",{attrs:{label:"BS_0410C - Vốn chủ sở hữu",value:1}}),t("el-option",{attrs:{label:"BS_0411C - Vốn chủ sở hữu",value:2}}),t("el-option",{attrs:{label:"BS_0412C - Vốn chủ sở hữu",value:3}})],1)],1)]}}],null,!0)})],1)]),t("div",{staticClass:"row"},[t("div",{staticClass:"col-12"},[e.isDisabled?t("list-config",{attrs:{"config-scale-point-list":e.tpBankRule.configScalePointList},on:{"update:configScalePointList":function(t){return e.$set(e.tpBankRule,"configScalePointList",t)},"update:config-scale-point-list":function(t){return e.$set(e.tpBankRule,"configScalePointList",t)}}}):t("list-config-editable",{attrs:{"config-scale-point-list":e.tpBankRule.configScalePointList,"can-edit":e.canEdit()},on:{"update:configScalePointList":function(t){return e.$set(e.tpBankRule,"configScalePointList",t)},"update:config-scale-point-list":function(t){return e.$set(e.tpBankRule,"configScalePointList",t)}}})],1)]),3===e.tpBankRule.status||4===e.tpBankRule.status?t("div",{staticClass:"row"},[t("div",{staticClass:"col-12"},[t("el-form-item",[t("label",{attrs:{for:"reason"}},[e._v("Lý do từ chối "),t("span",{staticClass:"text-danger"},[e._v("*")])]),t("el-input",{attrs:{id:"reason",disabled:"",rows:2,type:"textarea"},model:{value:e.tpBankRule.reason,callback:function(t){e.$set(e.tpBankRule,"reason",t)},expression:"tpBankRule.reason"}})],1)],1)]):e._e()]),t("div",{staticClass:"mt-5 text-center"},[t("el-button",{staticClass:"me-3",attrs:{type:"primary",plain:""},on:{click:e.closePage}},[e._v("ĐÓNG")]),!e.isDisabled&&e.canEdit()?t("el-button",{staticClass:"me-3",attrs:{type:"warning",plain:""},on:{click:function(t){return n(e.submit)}}},[e._v("LƯU")]):e._e(),e.tpBankRule.id&&!e.isDisabled&&e.canEdit()?t("el-button",{attrs:{type:"success",plain:""},on:{click:e.handleApply}},[e._v("TRÌNH DUYỆT")]):e._e()],1)]}}])}),t("apply-rule",{attrs:{"dialog-apply-visible":e.dialogApplyVisible,rule:e.tpBankRule},on:{"update:dialogApplyVisible":function(t){e.dialogApplyVisible=t},"update:dialog-apply-visible":function(t){e.dialogApplyVisible=t},"update:rule":function(t){e.tpBankRule=t}}})],1)},l=[],i=(a("e9c4"),a("7bb1")),r=a("3081"),s=a("7d99"),o=a("391d"),u=function(){var e=this,t=e._self._c;return t("el-dialog",{attrs:{visible:e.dialogApplyVisible,"before-close":e.closeDialog,center:!0,width:"40%","show-close":!1},on:{"update:visible":function(t){e.dialogApplyVisible=t},"update:beforeClose":function(t){e.closeDialog=t},"update:before-close":function(t){e.closeDialog=t}}},[t("h3",{staticClass:"title mt-3",attrs:{slot:"title"},slot:"title"},[t("strong",[e._v("Trình duyệt quy tắc TPBank")])]),t("div",{staticClass:"text-center"},[t("p",{staticClass:"text-danger"},[e._v("Bạn có chắc chắn muốn trình duyệt quy tắc này không?")])]),t("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[t("el-button",{attrs:{type:"info",plain:""},on:{click:e.closeDialog}},[e._v("ĐÓNG")]),t("el-button",{attrs:{type:"warning",plain:""},on:{click:function(t){return e.apply()}}},[e._v("ĐỒNG Ý")])],1)])},c=[],d={name:"ApplyRule",mixins:[o["a"]],props:{dialogApplyVisible:{type:Boolean,default:!1},rule:{type:Object,default:null}},methods:{apply:function(){var e=this,t={id:this.rule.id,status:2};Object(s["f"])(t).then((function(){e.notifyInfo("Thông tin","Trình duyệt quy tắc TPBank thành công"),Object(s["d"])(t.id,{}).then((function(t){var a=t.data;a.salesCriteria=JSON.parse(a.salesCriteria),a.equityCriteria=JSON.parse(a.equityCriteria),e.$emit("update:rule",a)})),e.closeDialog()}))},closeDialog:function(){this.$emit("update:dialogApplyVisible",!1)}}},f=d,p=(a("1456"),a("2877")),m=Object(p["a"])(f,u,c,!1,null,"b245d3d4",null),h=m.exports,g=function(){var e=this,t=e._self._c;return t("ValidationProvider",{attrs:{name:"configScalePointList",rules:{required:!0}},scopedSlots:e._u([{key:"default",fn:function(a){var n=a.errors;return[t("el-form-item",{attrs:{prop:"configScalePointList",error:e.messageError(e.tpBankRuleFields.configScalePointList,n[0])}},[t("label",{attrs:{for:"configScalePointList"}},[e._v("Thiết lập điểm quy mô "),t("span",{staticClass:"text-danger"},[e._v("*")]),e._v(" "),t("i",{staticClass:"ms-3 el-icon-circle-plus",staticStyle:{color:"#A045CB","font-size":"20px"},on:{click:e.addNewScalePoint}})]),t("el-table",{staticStyle:{width:"100%"},attrs:{data:e.configScalePointList,"header-cell-style":{background:"#F2F2F3",color:"#000000"},border:"",fit:"","highlight-current-row":""},model:{value:e.configScalePointList,callback:function(t){e.configScalePointList=t},expression:"configScalePointList"}},[t("el-table-column",{attrs:{label:"Thao tác",align:"center"},scopedSlots:e._u([{key:"default",fn:function(a){var n=a.$index;return e.canEdit?[t("i",{staticClass:"el-icon-delete",staticStyle:{color:"#FF485A"},on:{click:function(t){return e.removeScalePoint(n)}}})]:void 0}}],null,!0)}),t("el-table-column",{attrs:{label:"Doanh thu","header-align":"center"}},[t("el-table-column",{attrs:{label:"Dấu","header-align":"center"},scopedSlots:e._u([{key:"default",fn:function(a){var n=a.row;return[t("el-radio-group",{attrs:{disabled:!e.canEdit},model:{value:n.sales.fromSign,callback:function(t){e.$set(n.sales,"fromSign",t)},expression:"row.sales.fromSign"}},[t("el-radio",{staticClass:"me-2",attrs:{label:1}},[e._v(">=")]),t("el-radio",{attrs:{label:0}},[e._v(">")])],1)]}}],null,!0)}),t("el-table-column",{attrs:{label:"Chặn dưới","header-align":"center"},scopedSlots:e._u([{key:"default",fn:function(a){var n=a.row;return[t("ValidationProvider",{attrs:{name:"salesFromValue",rules:{regex:/^[0-9]*$/,isLower:"@salesToValue",max:20}},scopedSlots:e._u([{key:"default",fn:function(a){var l=a.errors;return[t("el-form-item",{attrs:{prop:"salesFromValue",error:e.messageError(e.salesScalePointFields.fromValue,l[0])}},[t("el-input",{ref:"salesFromValue",staticClass:"form-control non-border",attrs:{id:"salesFromValue",disabled:!e.canEdit,placeholder:"Nhập"},model:{value:n.sales.fromValue,callback:function(t){e.$set(n.sales,"fromValue",t)},expression:"row.sales.fromValue"}}),t("div",{staticClass:"el-form-item__error",staticStyle:{position:"relative"},attrs:{slot:"error"},slot:"error"},[e._v(e._s(e.messageError(e.salesScalePointFields.fromValue,l[0])))])],1)]}}],null,!0)})]}}],null,!0)}),t("el-table-column",{attrs:{label:"Chặn trên","header-align":"center"},scopedSlots:e._u([{key:"default",fn:function(a){var n=a.row;return[t("ValidationProvider",{attrs:{name:"salesToValue",rules:{regex:/^[0-9]*$/,max:20}},scopedSlots:e._u([{key:"default",fn:function(a){var l=a.errors;return[t("el-form-item",{attrs:{prop:"salesToValue",error:e.messageError(e.salesScalePointFields.toValue,l[0])}},[t("el-input",{ref:"salesToValue",staticClass:"form-control non-border",attrs:{id:"salesToValue",disabled:!e.canEdit,placeholder:"Nhập"},model:{value:n.sales.toValue,callback:function(t){e.$set(n.sales,"toValue",t)},expression:"row.sales.toValue"}})],1),t("div",{staticClass:"el-form-item__error",staticStyle:{position:"relative"},attrs:{slot:"error"},slot:"error"},[e._v(e._s(e.messageError(e.salesScalePointFields.toValue,l[0])))])]}}],null,!0)})]}}],null,!0)}),t("el-table-column",{attrs:{label:"Dấu","header-align":"center"},scopedSlots:e._u([{key:"default",fn:function(a){var n=a.row;return[t("el-radio-group",{attrs:{disabled:!e.canEdit},model:{value:n.sales.toSign,callback:function(t){e.$set(n.sales,"toSign",t)},expression:"row.sales.toSign"}},[t("el-radio",{staticClass:"me-2",attrs:{label:0}},[e._v("<")]),t("el-radio",{attrs:{label:1}},[e._v("<=")])],1)]}}],null,!0)})],1),t("el-table-column",{attrs:{label:"Vốn chủ sở hữu","header-align":"center"}},[t("el-table-column",{attrs:{label:"Dấu","header-align":"center"},scopedSlots:e._u([{key:"default",fn:function(a){var n=a.row;return[t("el-radio-group",{attrs:{disabled:!e.canEdit},model:{value:n.equity.fromSign,callback:function(t){e.$set(n.equity,"fromSign",t)},expression:"row.equity.fromSign"}},[t("el-radio",{staticClass:"me-2",attrs:{label:1}},[e._v(">=")]),t("el-radio",{attrs:{label:0}},[e._v(">")])],1)]}}],null,!0)}),t("el-table-column",{attrs:{label:"Chặn dưới","header-align":"center"},scopedSlots:e._u([{key:"default",fn:function(a){var n=a.row;return[t("ValidationProvider",{attrs:{name:"equityFromValue",rules:{regex:/^[0-9]*$/,isLower:"@equityToValue",max:20}},scopedSlots:e._u([{key:"default",fn:function(a){var l=a.errors;return[t("el-form-item",{attrs:{prop:"equityFromValue",error:e.messageError(e.equityScalePointFields.fromValue,l[0])}},[t("el-input",{ref:"equityFromValue",staticClass:"form-control non-border",attrs:{id:"equityFromValue",disabled:!e.canEdit,placeholder:"Nhập"},model:{value:n.equity.fromValue,callback:function(t){e.$set(n.equity,"fromValue",t)},expression:"row.equity.fromValue"}}),t("div",{staticClass:"el-form-item__error",staticStyle:{position:"relative"},attrs:{slot:"error"},slot:"error"},[e._v(e._s(e.messageError(e.equityScalePointFields.fromValue,l[0])))])],1)]}}],null,!0)})]}}],null,!0)}),t("el-table-column",{attrs:{label:"Chặn trên","header-align":"center"},scopedSlots:e._u([{key:"default",fn:function(a){var n=a.row;return[t("ValidationProvider",{attrs:{name:"equityToValue",rules:{regex:/^[0-9]*$/,max:20}},scopedSlots:e._u([{key:"default",fn:function(a){var l=a.errors;return[t("el-form-item",{attrs:{prop:"equityToValue",error:e.messageError(e.equityScalePointFields.toValue,l[0])}},[t("el-input",{ref:"equityToValue",staticClass:"form-control non-border",attrs:{id:"equityToValue",disabled:!e.canEdit,placeholder:"Nhập"},model:{value:n.equity.toValue,callback:function(t){e.$set(n.equity,"toValue",t)},expression:"row.equity.toValue"}})],1),t("div",{staticClass:"el-form-item__error",staticStyle:{position:"relative"},attrs:{slot:"error"},slot:"error"},[e._v(e._s(e.messageError(e.equityScalePointFields.toValue,l[0])))])]}}],null,!0)})]}}],null,!0)}),t("el-table-column",{attrs:{label:"Dấu","header-align":"center"},scopedSlots:e._u([{key:"default",fn:function(a){var n=a.row;return[t("el-radio-group",{attrs:{disabled:!e.canEdit},model:{value:n.equity.toSign,callback:function(t){e.$set(n.equity,"toSign",t)},expression:"row.equity.toSign"}},[t("el-radio",{staticClass:"me-2",attrs:{label:0}},[e._v("<")]),t("el-radio",{attrs:{label:1}},[e._v("<=")])],1)]}}],null,!0)})],1),t("el-table-column",{attrs:{label:"Size","header-align":"center",with:"100px"},scopedSlots:e._u([{key:"default",fn:function(a){var n=a.row;return[t("ValidationProvider",{attrs:{name:"size",rules:"required"},scopedSlots:e._u([{key:"default",fn:function(a){var l=a.errors;return[t("el-form-item",{attrs:{prop:"size",error:e.messageError(e.configScalePointFields.size,l[0])}},[t("el-input",{ref:"size",staticClass:"form-control non-border",attrs:{id:"size",disabled:!e.canEdit,placeholder:"Nhập"},model:{value:n.size,callback:function(t){e.$set(n,"size",t)},expression:"row.size"}}),t("div",{staticClass:"el-form-item__error",staticStyle:{position:"relative"},attrs:{slot:"error"},slot:"error"},[e._v(e._s(e.messageError(e.configScalePointFields.size,l[0])))])],1)]}}],null,!0)})]}}],null,!0)}),t("el-table-column",{attrs:{label:"Quy mô","header-align":"center",with:"100px"},scopedSlots:e._u([{key:"default",fn:function(a){var n=a.row;return[t("ValidationProvider",{attrs:{name:"scale",rules:"required"},scopedSlots:e._u([{key:"default",fn:function(a){var l=a.errors;return[t("el-form-item",{attrs:{prop:"scale",error:e.messageError(e.configScalePointFields.scale,l[0])}},[t("el-select",{staticClass:"form-control non-border",attrs:{id:"scale",placeholder:"Chọn",disabled:!e.canEdit},model:{value:n.scale,callback:function(t){e.$set(n,"scale",t)},expression:"row.scale"}},[t("el-option",{attrs:{label:"Nhỏ",value:1}}),t("el-option",{attrs:{label:"Lớn",value:2}}),t("el-option",{attrs:{label:"Vừa",value:3}})],1),t("div",{staticClass:"el-form-item__error",staticStyle:{position:"relative"},attrs:{slot:"error"},slot:"error"},[e._v(e._s(e.messageError(e.configScalePointFields.scale,l[0])))])],1)]}}],null,!0)})]}}],null,!0)})],1)],1)]}}])})},b=[],v=(a("a434"),{name:"ListConfigEditable",components:{ValidationProvider:i["b"]},mixins:[r["a"],o["a"]],props:{configScalePointList:{type:Array,default:null},canEdit:{type:Boolean,default:!1}},methods:{addNewScalePoint:function(){this.configScalePointList.push(this.createNewScalePoint())},removeScalePoint:function(e){this.configScalePointList.splice(e,1),this.$emit("update:configScalePointList",this.configScalePointList)},createNewScalePoint:function(){return{sales:{fromSign:1,fromValue:null,toValue:null,toSign:0},equity:{fromSign:1,fromValue:null,toValue:null,toSign:0},size:"",scale:null}}}}),y=v,k=(a("386b"),Object(p["a"])(y,g,b,!1,null,null,null)),S=k.exports,C=function(){var e=this,t=e._self._c;return t("el-table",{staticStyle:{width:"100%"},attrs:{data:e.configScalePointList,"header-cell-style":{background:"#F2F2F3",color:"#000000"},border:"",fit:"","highlight-current-row":""},model:{value:e.configScalePointList,callback:function(t){e.configScalePointList=t},expression:"configScalePointList"}},[t("el-table-column",{attrs:{label:"Thao tác",align:"center"}}),t("el-table-column",{attrs:{label:"Doanh thu","header-align":"center"}},[t("el-table-column",{attrs:{label:"Dấu","header-align":"center"},scopedSlots:e._u([{key:"default",fn:function(a){var n=a.row;return[t("el-radio-group",{attrs:{disabled:""},model:{value:n.sales.fromSign,callback:function(t){e.$set(n.sales,"fromSign",t)},expression:"row.sales.fromSign"}},[t("el-radio",{staticClass:"me-2",attrs:{label:1}},[e._v(">=")]),t("el-radio",{attrs:{label:0}},[e._v(">")])],1)]}}])}),t("el-table-column",{attrs:{label:"Chặn dưới",align:"center"},scopedSlots:e._u([{key:"default",fn:function(a){var n=a.row;return[n.sales.fromValue?t("span",[e._v(e._s(n.sales.fromValue))]):t("span",[e._v("-∞")])]}}])}),t("el-table-column",{attrs:{label:"Chặn trên",align:"center"},scopedSlots:e._u([{key:"default",fn:function(a){var n=a.row;return[n.sales.toValue?t("span",[e._v(e._s(n.sales.toValue))]):t("span",[e._v("+∞")])]}}])}),t("el-table-column",{attrs:{label:"Dấu","header-align":"center"},scopedSlots:e._u([{key:"default",fn:function(a){var n=a.row;return[t("el-radio-group",{attrs:{disabled:""},model:{value:n.sales.toSign,callback:function(t){e.$set(n.sales,"toSign",t)},expression:"row.sales.toSign"}},[t("el-radio",{staticClass:"me-2",attrs:{label:0}},[e._v("<")]),t("el-radio",{attrs:{label:1}},[e._v("<=")])],1)]}}])})],1),t("el-table-column",{attrs:{label:"Vốn chủ sở hữu","header-align":"center"}},[t("el-table-column",{attrs:{label:"Dấu","header-align":"center"},scopedSlots:e._u([{key:"default",fn:function(a){var n=a.row;return[t("el-radio-group",{attrs:{disabled:""},model:{value:n.equity.fromSign,callback:function(t){e.$set(n.equity,"fromSign",t)},expression:"row.equity.fromSign"}},[t("el-radio",{staticClass:"me-2",attrs:{label:1}},[e._v(">=")]),t("el-radio",{attrs:{label:0}},[e._v(">")])],1)]}}])}),t("el-table-column",{attrs:{label:"Chặn dưới",align:"center"},scopedSlots:e._u([{key:"default",fn:function(a){var n=a.row;return[n.equity.fromValue?t("span",[e._v(e._s(n.equity.fromValue))]):t("span",[e._v("-∞")])]}}])}),t("el-table-column",{attrs:{label:"Chặn trên",align:"center"},scopedSlots:e._u([{key:"default",fn:function(a){var n=a.row;return[n.equity.toValue?t("span",[e._v(e._s(n.equity.toValue))]):t("span",[e._v("+∞")])]}}])}),t("el-table-column",{attrs:{label:"Dấu","header-align":"center"},scopedSlots:e._u([{key:"default",fn:function(a){var n=a.row;return[t("el-radio-group",{attrs:{disabled:""},model:{value:n.equity.toSign,callback:function(t){e.$set(n.equity,"toSign",t)},expression:"row.equity.toSign"}},[t("el-radio",{staticClass:"me-2",attrs:{label:0}},[e._v("<")]),t("el-radio",{attrs:{label:1}},[e._v("<=")])],1)]}}])})],1),t("el-table-column",{attrs:{label:"Size",align:"center",with:"100px"},scopedSlots:e._u([{key:"default",fn:function(t){var a=t.row;return[e._v(" "+e._s(a.size)+" ")]}}])}),t("el-table-column",{attrs:{label:"Quy mô",align:"center",with:"100px"},scopedSlots:e._u([{key:"default",fn:function(t){var a=t.row;return[e._v(" "+e._s(e.renderScale(a.scale))+" ")]}}])})],1)},_=[],V={name:"ListConfig",props:{configScalePointList:{type:Array,default:null}},methods:{renderScale:function(e){return 1===e?"Nhỏ":2===e?"Lớn":"Vừa"}}},q=V,T=(a("5373"),Object(p["a"])(q,C,_,!1,null,null,null)),P=T.exports,F={name:"ModifyRule",components:{ListConfigEditable:S,ApplyRule:h,ValidationObserver:i["a"],ValidationProvider:i["b"],ListConfig:P},mixins:[r["a"],o["a"]],data:function(){return{tpBankRule:{name:"",sales:null,salesCriteria:[],equity:null,equityCriteria:[],configScalePointList:[],status:1,reason:""},dialogApplyVisible:!1,isDisabled:!1}},created:function(){var e=this,t=this.$route.params.id;this.isDisabled=this.$route.params.disabled,t&&Object(s["d"])(t,null).then((function(t){var a=t.data;e.tpBankRule=a,e.tpBankRule.salesCriteria=JSON.parse(a.salesCriteria),e.tpBankRule.equityCriteria=JSON.parse(a.equityCriteria);var n=e.$route.params.isCopy;n&&(e.tpBankRule.id=null,e.tpBankRule.name+=" - Copy",e.tpBankRule.status=1),e.notifyInfo("Thông tin",t.message)}))},methods:{closePage:function(){this.$router.back()},canEdit:function(){return 1===this.tpBankRule.status||3===this.tpBankRule.status||4===this.tpBankRule.status},submit:function(){this.tpBankRule.id?this.updateData():this.createData()},updateData:function(){var e=this;this.showLoading();var t=this.tpBankRule.equityCriteria,a=this.tpBankRule.salesCriteria,n=Object.assign({},this.tpBankRule);n.equityCriteria=JSON.stringify(t),n.salesCriteria=JSON.stringify(a),3===n.status&&(n.status=4),Object(s["e"])(n.id,n).then((function(t){e.notifyInfo("Thông tin",t.message),e.hideLoading()})).catch((function(){e.hideLoading()}))},createData:function(){var e=this;this.showLoading();var t=this.tpBankRule.equityCriteria,a=this.tpBankRule.salesCriteria,n=Object.assign({},this.tpBankRule);n.equityCriteria=JSON.stringify(t),n.salesCriteria=JSON.stringify(a),Object(s["a"])(n).then((function(t){e.notifyInfo("Thông tin",t.message),e.hideLoading()})).catch((function(){e.hideLoading()}))},handleApply:function(){this.dialogApplyVisible=!0}}},B=F,D=(a("1ca3"),Object(p["a"])(B,n,l,!1,null,null,null));t["default"]=D.exports},5373:function(e,t,a){"use strict";a("4c1f")},"7d99":function(e,t,a){"use strict";a.d(t,"c",(function(){return l})),a.d(t,"d",(function(){return i})),a.d(t,"a",(function(){return r})),a.d(t,"e",(function(){return s})),a.d(t,"b",(function(){return o})),a.d(t,"f",(function(){return u}));var n=a("b775");function l(e){return Object(n["a"])({url:"tpbank-rules",method:"get",params:e})}function i(e,t){return Object(n["a"])({url:"tpbank-rules/".concat(e),method:"get",params:t})}function r(e){return Object(n["a"])({url:"tpbank-rules",method:"post",data:e})}function s(e,t){return Object(n["a"])({url:"tpbank-rules/".concat(e),method:"put",data:t})}function o(e,t){return Object(n["a"])({url:"tpbank-rules/".concat(e),method:"delete",data:t})}function u(e){return Object(n["a"])({url:"tpbank-rules/updatestatus",method:"put",data:e})}},a8c9:function(e,t,a){},b4a5:function(e,t,a){"use strict";t["a"]={data:function(){return{pagination:{pageNumber:1,pageSize:10,totalItems:0,totalPages:0},pageSizes:[10,20,50,100]}},methods:{}}},c76b:function(e,t,a){},e698:function(e,t,a){},e9c4:function(e,t,a){var n=a("23e7"),l=a("d066"),i=a("d039"),r=l("JSON","stringify"),s=/[\uD800-\uDFFF]/g,o=/^[\uD800-\uDBFF]$/,u=/^[\uDC00-\uDFFF]$/,c=function(e,t,a){var n=a.charAt(t-1),l=a.charAt(t+1);return o.test(e)&&!u.test(l)||u.test(e)&&!o.test(n)?"\\u"+e.charCodeAt(0).toString(16):e},d=i((function(){return'"\\udf06\\ud834"'!==r("\udf06\ud834")||'"\\udead"'!==r("\udead")}));r&&n({target:"JSON",stat:!0,forced:d},{stringify:function(e,t,a){var n=r.apply(null,arguments);return"string"==typeof n?n.replace(s,c):n}})}}]);