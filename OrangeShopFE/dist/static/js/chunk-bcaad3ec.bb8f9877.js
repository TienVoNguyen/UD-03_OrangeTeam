(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-bcaad3ec"],{"095f":function(t,e,a){},"12fb":function(t,e,a){"use strict";a("095f")},"391d":function(t,e,a){"use strict";var n=a("b4a5"),i={data:function(){return{loading:null}},methods:{showLoading:function(){var t=this;this.loading=this.$loading({lock:!0,text:"Đang tải"}),setTimeout((function(){t.hideLoading()}),5e4)},hideLoading:function(){this.loading.close()}}},o={data:function(){return{duration:3e3}},methods:{notifySuccess:function(t,e){this.$notify({title:t,message:e,type:"success",duration:this.duration,customClass:"loading-backgroup-success"})},notifyWarning:function(t,e){this.$notify({title:t,message:e,type:"warning",duration:this.duration,customClass:"loading-backgroup-warning"})},notifyInfo:function(t,e){this.$notify({title:t,message:e,type:"info",duration:this.duration,customClass:"loading-backgroup-info"})},notifyError:function(t,e){this.$notify({title:t,message:e,type:"error",duration:this.duration,customClass:"loading-backgroup-error"})}}},s=(a("d3b7"),a("25f0"),{data:function(){return{}},methods:{convertDateToServer:function(t,e){return""===t||void 0===t||null==t?"":this.$moment(t,e).tz(this.$moment.tz.guess(!0)).utc().format()},convertDateToLocal:function(t,e){return""===t||void 0===t||null==t?"":this.$moment.utc(t).parseZone(this.$moment.tz.guess(!0)).local().format(e)},convertDateToLocalUTC:function(t,e){return""===t||void 0===t||null==t?"":this.$moment.utc(t).format(e)},convertDateToAnotherFormat:function(t,e,a){return""===t||void 0===t?"":this.$moment(t,e).format(a)},ConvertTimeRanges:function(t){if(null!=t&&t.toString().length>0){var e=t.split(" to ");return this.TimeRangesModel.from=this.convertDateToAnotherFormat(e[0]+" 00:00:00","DD-MM-YYYY HH:mm:ss","YYYY-MM-DD[T]HH:mm:ss[Z]"),this.TimeRangesModel.to=this.convertDateToAnotherFormat(e[1]+" 23:59:59","DD-MM-YYYY HH:mm:ss","YYYY-MM-DD[T]HH:mm:ss[Z]"),this.TimeRangesModel}return this.TimeRangesModel.to=null,this.TimeRangesModel.from=null,this.TimeRangesModel},ConvertTimeFrom:function(t){return this.convertDateToAnotherFormat(t+" 00:00:00","DD-MM-YYYY HH:mm:ss","YYYY-MM-DD[T]HH:mm:ss[Z]")},ConvertTimeTo:function(t){return this.convertDateToAnotherFormat(t+" 23:59:59","DD-MM-YYYY HH:mm:ss","YYYY-MM-DD[T]HH:mm:ss[Z]")},ConvertTimeFromToDateJava:function(t){return t+" 00:00:00"},ConvertTimeToToDateJava:function(t){return t+" 23:59:59"}}}),l={methods:{hasPermission:function(t,e){return-1!==this.$store.getters.actions[null===t||void 0===t?void 0:t.toLowerCase()].indexOf(e)}}};e["a"]={mixins:[n["a"],i,o,s,l]}},6724:function(t,e,a){"use strict";a("8d41");var n="@@wavesContext";function i(t,e){function a(a){var n=Object.assign({},e.value),i=Object.assign({ele:t,type:"hit",color:"rgba(0, 0, 0, 0.15)"},n),o=i.ele;if(o){o.style.position="relative",o.style.overflow="hidden";var s=o.getBoundingClientRect(),l=o.querySelector(".waves-ripple");switch(l?l.className="waves-ripple":(l=document.createElement("span"),l.className="waves-ripple",l.style.height=l.style.width=Math.max(s.width,s.height)+"px",o.appendChild(l)),i.type){case"center":l.style.top=s.height/2-l.offsetHeight/2+"px",l.style.left=s.width/2-l.offsetWidth/2+"px";break;default:l.style.top=(a.pageY-s.top-l.offsetHeight/2-document.documentElement.scrollTop||document.body.scrollTop)+"px",l.style.left=(a.pageX-s.left-l.offsetWidth/2-document.documentElement.scrollLeft||document.body.scrollLeft)+"px"}return l.style.backgroundColor=i.color,l.className="waves-ripple z-active",!1}}return t[n]?t[n].removeHandle=a:t[n]={removeHandle:a},a}var o={bind:function(t,e){t.addEventListener("click",i(t,e),!1)},update:function(t,e){t.removeEventListener("click",t[n].removeHandle,!1),t.addEventListener("click",i(t,e),!1)},unbind:function(t){t.removeEventListener("click",t[n].removeHandle,!1),t[n]=null,delete t[n]}},s=function(t){t.directive("waves",o)};window.Vue&&(window.waves=o,Vue.use(s)),o.install=s;e["a"]=o},"68aa":function(t,e,a){"use strict";a.r(e);a("b0c0"),a("4de4"),a("d3b7");var n=function(){var t=this,e=t._self._c;return e("div",{staticClass:"app-container"},[e("div",{staticClass:"filter"},[e("el-form",{ref:"filterForm",staticClass:"mt-3",attrs:{"label-position":"left"}},[e("div",{staticClass:"row"},[e("div",{staticClass:"col-3"},[e("el-form-item",[e("label",{attrs:{for:"name"}},[t._v("Tên quy tắc")]),e("el-input",{ref:"name",staticClass:"form-control non-border",attrs:{id:"name",placeholder:"Nhập tên quy tắc"},model:{value:t.filter.name,callback:function(e){t.$set(t.filter,"name",e)},expression:"filter.name"}})],1)],1),e("div",{staticClass:"col-1"}),e("div",{staticClass:"col-3"},[e("el-form-item",[e("label",[t._v("Ngày tạo")]),e("div",[e("el-date-picker",{staticStyle:{width:"40%"},attrs:{placeholder:"Từ ngày",type:"date","value-format":"yyyy-MM-dd",format:"dd/MM/yyyy"},model:{value:t.filter.createdFrom,callback:function(e){t.$set(t.filter,"createdFrom",e)},expression:"filter.createdFrom"}}),e("i",{staticClass:"el-icon-minus font-weight-bold",staticStyle:{padding:"1% 2% 0 2%"}}),e("el-date-picker",{staticStyle:{width:"40%"},attrs:{placeholder:"Đến ngày",type:"date",format:"dd/MM/yyyy","value-format":"yyyy-MM-dd"},model:{value:t.filter.createdTo,callback:function(e){t.$set(t.filter,"createdTo",e)},expression:"filter.createdTo"}})],1)])],1),e("div",{staticClass:"col-1"}),e("div",{staticClass:"col-3"},[e("el-form-item",[e("label",{attrs:{for:"status"}},[t._v("Trạng thái")]),e("el-select",{staticClass:"form-control non-border",attrs:{id:"status",placeholder:"---Tất cả---"},model:{value:t.filter.status,callback:function(e){t.$set(t.filter,"status",e)},expression:"filter.status"}},[e("el-option",{attrs:{label:"Tất cả",value:""}}),e("el-option",{attrs:{label:"Tạo mới",value:"1"}}),e("el-option",{attrs:{label:"Chờ duyệt",value:"2"}}),e("el-option",{attrs:{label:"Từ chối",value:"3"}}),e("el-option",{attrs:{label:"Chỉnh sửa",value:"4"}}),e("el-option",{attrs:{label:"Hoạt động",value:"5"}}),e("el-option",{attrs:{label:"Không hoạt động",value:"6"}})],1)],1)],1)])]),e("div",{staticClass:"row mt-3 mb-5 me-5"},[e("div",{staticClass:"col-12 text-center"},[e("el-button",{staticClass:"me-5",attrs:{type:"primary",plain:""},on:{click:t.handleSearch}},[t._v("Tìm kiếm")]),e("router-link",{attrs:{to:"/parameter-management/scale/tpbank-rule/add"}},[e("el-button",{attrs:{type:"warning",plain:""}},[t._v("Thêm mới")])],1)],1)])],1),e("div",{staticClass:"content"},[e("el-table",{staticStyle:{width:"100%"},attrs:{data:t.list,"header-cell-style":{background:"#F2F2F3",color:"#000000"},border:"",fit:"","highlight-current-row":""}},[e("el-table-column",{attrs:{width:"100px",label:"Thao tác","header-align":"center"},scopedSlots:t._u([{key:"default",fn:function(a){var n=a.row;return[e("div",{staticClass:"row"},[e("div",{staticClass:"col-2"}),e("div",{staticClass:"col-2"},[e("span",{staticClass:"me-2"},[1===n.status||3===n.status||4===n.status?e("router-link",{attrs:{to:{name:"EditRule",params:{id:n.id}}}},[e("svg-icon",{staticStyle:{color:"#083863"},attrs:{"icon-class":"edit"}})],1):t._e(),2===n.status||5===n.status||6===n.status?e("router-link",{attrs:{to:{name:"ViewRule",params:{id:n.id,disabled:!0}}}},[e("svg-icon",{staticStyle:{color:"#A045CB"},attrs:{"icon-class":"eye-open"}})],1):t._e()],1)]),e("div",{staticClass:"col-2"},[e("span",[1===n.status||3===n.status||4===n.status?e("i",{staticClass:"el-icon-delete",staticStyle:{color:"#FF485A"},on:{click:function(e){return t.handleDelete(n)}}}):t._e(),5===n.status||6===n.status?e("router-link",{attrs:{to:{name:"AddRule",params:{isCopy:!0,id:n.id}}}},[e("i",{staticClass:"el-icon-document-copy",staticStyle:{color:"#0FA958"}})]):t._e()],1)])])]}}])}),e("el-table-column",{attrs:{label:"Tên quy tắc","header-align":"center"},scopedSlots:t._u([{key:"default",fn:function(e){var a=e.row;return[t._v(" "+t._s(a.name)+" ")]}}])}),e("el-table-column",{attrs:{label:"Ngày tạo",width:"200px","header-align":"center"},scopedSlots:t._u([{key:"default",fn:function(e){var a=e.row;return[t._v(" "+t._s(t.convertDate(a.createdAt))+" ")]}}])}),e("el-table-column",{attrs:{label:"Ngày duyệt",width:"200px","header-align":"center"},scopedSlots:t._u([{key:"default",fn:function(e){var a=e.row;return[t._v(" "+t._s(t.convertDate(a.approvedAt))+" ")]}}])}),e("el-table-column",{attrs:{label:"Trạng thái",width:"200px","header-align":"center"},scopedSlots:t._u([{key:"default",fn:function(e){var a=e.row;return[t._v(" "+t._s(t.renderStatus(a.status))+" ")]}}])})],1),e("div",{staticClass:"float-end mt-3"},[e("el-pagination",{attrs:{"current-page":t.pagination.pageNumber,"page-size":t.pagination.pageSize,"page-sizes":t.pageSizes,layout:"sizes,prev, pager, next, total",total:t.pagination.totalItems},on:{"update:currentPage":function(e){return t.$set(t.pagination,"pageNumber",e)},"update:current-page":function(e){return t.$set(t.pagination,"pageNumber",e)},"size-change":t.handleSizeChange,"current-change":t.handleCurrentChange}})],1),e("delete-rule",{attrs:{"dialog-delete-visible":t.dialogDeleteVisible,temp:t.temp,list:t.list,pagination:t.pagination},on:{"update:dialogDeleteVisible":function(e){t.dialogDeleteVisible=e},"update:dialog-delete-visible":function(e){t.dialogDeleteVisible=e},"update:list":function(e){t.list=e},"update:pagination":function(e){t.pagination=e}}}),e("change-status-rule",{attrs:{"dialog-change-status-visible":t.dialogChangeStatusVisible,temp:t.temp,list:t.list},on:{"update:dialogChangeStatusVisible":function(e){t.dialogChangeStatusVisible=e},"update:dialog-change-status-visible":function(e){t.dialogChangeStatusVisible=e},"update:list":function(e){t.list=e}}})],1)])},i=[],o=a("6724"),s=a("391d"),l=function(){var t=this,e=t._self._c;return e("el-dialog",{attrs:{visible:t.dialogDeleteVisible,"before-close":t.closeDialog,center:!0,width:"30%","show-close":!1},on:{"update:visible":function(e){t.dialogDeleteVisible=e},"update:beforeClose":function(e){t.closeDialog=e},"update:before-close":function(e){t.closeDialog=e}}},[e("h3",{staticClass:"title mt-3",attrs:{slot:"title"},slot:"title"},[e("strong",[t._v("Xóa bộ quy tắc ")])]),e("div",{staticClass:"text-center"},[e("p",{staticClass:"text-danger"},[t._v("Bạn có chắc chắn muốn xóa bộ quy tắc này không?")])]),e("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[e("el-button",{staticClass:"me-3",attrs:{type:"primary",plain:""},on:{click:t.closeDialog}},[t._v("ĐÓNG")]),e("el-button",{attrs:{type:"warning",plain:""},on:{click:t.deleteData}},[t._v("ĐỒNG Ý")])],1)])},r=[],c=a("7d99"),u={name:"DeleteRule",mixins:[s["a"]],props:{dialogDeleteVisible:{type:Boolean,default:!1},temp:{type:Object,default:null},list:{type:Array,default:null},pagination:{type:Object,default:null}},methods:{closeDialog:function(){this.$emit("update:dialogDeleteVisible",!1)},deleteData:function(){var t=this;this.temp.isDeleted=1,Object(c["b"])(this.temp.id,this.temp).then((function(){var e={isDeleted:0,pageIndex:t.pagination.pageNumber,pageSize:t.pagination.pageSize};Object(c["c"])(e).then((function(e){var a={pageNumber:e.data.pageNumber,totalItems:e.data.totalItems,totalPages:e.data.totalPages};t.$emit("update:list",e.data.result),t.$emit("update:pagination",a)})),t.notifyInfo("Thông tin","Xóa quy tắc TPBank thành công")})),this.closeDialog()}}},d=u,f=(a("12fb"),a("2877")),g=Object(f["a"])(d,l,r,!1,null,"143798d6",null),h=g.exports,p=function(){var t=this,e=t._self._c;return e("el-dialog",{attrs:{visible:t.dialogChangeStatusVisible,"before-close":t.closeDialog,center:!0,width:"40%","show-close":!1},on:{"update:visible":function(e){t.dialogChangeStatusVisible=e},"update:beforeClose":function(e){t.closeDialog=e},"update:before-close":function(e){t.closeDialog=e}}},[e("h3",{staticClass:"title mt-3",attrs:{slot:"title"},slot:"title"},[e("strong",[t._v("Thay đổi trạng thái")])]),e("div",{staticClass:"text-center"},[e("p",{staticClass:"text-danger"},[t._v("Bạn có chắc chắn muốn thay đổi trạng thái hoạt động của Bộ quy tắc này không?")])]),e("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[e("el-button",{attrs:{type:"info",plain:""},on:{click:t.closeDialog}},[t._v("ĐÓNG")]),e("el-button",{attrs:{type:"warning",plain:""},on:{click:function(e){return t.changeStatus()}}},[t._v("ĐỒNG Ý")])],1)])},m=[],v={name:"ChangeStatusRule",mixins:[s["a"]],props:{dialogChangeStatusVisible:{type:Boolean,default:!1},rule:{type:Object,default:null},list:{type:Array,default:null}},methods:{changeStatus:function(){var t=this,e=5;5===this.rule.status&&(e=6);var a={id:this.rule.id,status:e};Object(c["f"])(a).then((function(){t.notifyInfo("Thông tin","Thay đổi trạng thái quy tắc TPBank thành công"),Object(c["c"])({}).then((function(e){t.$emit("update:list",e.data.result)})),t.closeDialog()}))},closeDialog:function(){this.$emit("update:dialogChangeStatusVisible",!1)}}},b=v,y=(a("6b71"),Object(f["a"])(b,p,m,!1,null,"206d7b48",null)),C=y.exports,D={name:"ListRule",components:{DeleteRule:h,ChangeStatusRule:C},directives:{waves:o["a"]},mixins:[s["a"]],data:function(){return{list:null,dialogDeleteVisible:!1,dialogChangeStatusVisible:!1,filter:{name:null,createdFrom:null,createdTo:null,status:null},temp:{name:"",unit:"Triệu đồng",sales:null,sales_criteria:null,equity:null,equity_criteria:null,configScalePointList:[]}}},created:function(){this.getListRule()},methods:{handleCurrentChange:function(t){this.pagination.pageNumber=t},handleSizeChange:function(t){this.pagination.pageSize=t},getListRule:function(){var t,e,a,n,i=this;this.showLoading();var o={name:null===(t=this.filter)||void 0===t?void 0:t.name,createdFrom:null===(e=this.filter)||void 0===e?void 0:e.createdFrom,createdTo:null===(a=this.filter)||void 0===a?void 0:a.createdTo,status:null===(n=this.filter)||void 0===n?void 0:n.status,isDeleted:0,pageIndex:this.pagination.pageNumber,pageSize:this.pagination.pageSize};Object(c["c"])(o).then((function(t){i.list=t.data.result,i.pagination={pageNumber:t.data.pageNumber,pageSize:t.data.pageSize,totalItems:t.data.totalItems,totalPages:t.data.totalPages},i.notifyInfo("Thông tin",t.message),i.hideLoading()})).catch((function(){i.hideLoading()}))},handleSearch:function(){this.getListRule()},handleDelete:function(t){var e=this;Object(c["d"])(t.id,{}).then((function(t){var a=t.data;e.temp=a,e.dialogDeleteVisible=!0}))},handleChangeStatus:function(t){var e=this;Object(c["d"])(t.id,{}).then((function(t){var a=t.data;e.temp=a,e.dialogChangeStatusVisible=!0}))},convertDate:function(t){return this.convertDateToLocal(t,"DD/MM/YYYY")},renderStatus:function(t){if(!t)return"";var e="";switch(t){case 1:e="Tạo mới";break;case 2:e="Chờ duyệt";break;case 3:e="Từ chối";break;case 4:e="Chỉnh sửa";break;case 5:e="Hoạt động";break;case 6:e="Không hoạt động";break}return e}}},T=D,k=(a("cc28"),Object(f["a"])(T,n,i,!1,null,null,null));e["default"]=k.exports},"6b71":function(t,e,a){"use strict";a("ad6a")},"7d99":function(t,e,a){"use strict";a.d(e,"c",(function(){return i})),a.d(e,"d",(function(){return o})),a.d(e,"a",(function(){return s})),a.d(e,"e",(function(){return l})),a.d(e,"b",(function(){return r})),a.d(e,"f",(function(){return c}));var n=a("b775");function i(t){return Object(n["a"])({url:"tpbank-rules",method:"get",params:t})}function o(t,e){return Object(n["a"])({url:"tpbank-rules/".concat(t),method:"get",params:e})}function s(t){return Object(n["a"])({url:"tpbank-rules",method:"post",data:t})}function l(t,e){return Object(n["a"])({url:"tpbank-rules/".concat(t),method:"put",data:e})}function r(t,e){return Object(n["a"])({url:"tpbank-rules/".concat(t),method:"delete",data:e})}function c(t){return Object(n["a"])({url:"tpbank-rules/updatestatus",method:"put",data:t})}},"8d41":function(t,e,a){},a0eb:function(t,e,a){},ad6a:function(t,e,a){},b4a5:function(t,e,a){"use strict";e["a"]={data:function(){return{pagination:{pageNumber:1,pageSize:10,totalItems:0,totalPages:0},pageSizes:[10,20,50,100]}},methods:{}}},cc28:function(t,e,a){"use strict";a("a0eb")}}]);