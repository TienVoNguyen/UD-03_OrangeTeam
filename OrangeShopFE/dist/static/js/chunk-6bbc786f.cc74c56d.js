(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-6bbc786f"],{"0354":function(t,e,n){"use strict";var o=function(){var t=this,e=t._self._c;return e("ValidationObserver",{ref:"observer",scopedSlots:t._u([{key:"default",fn:function(n){var o=n.handleSubmit;return[e("el-dialog",{attrs:{visible:t.dialogImportVisible,"before-close":t.closeDialog},on:{"update:visible":function(e){t.dialogImportVisible=e},"update:beforeClose":function(e){t.closeDialog=e},"update:before-close":function(e){t.closeDialog=e}}},[e("h3",{staticClass:"title mt-3",attrs:{slot:"title"},slot:"title"},[e("strong",[t._v("Import thuộc tính")])]),e("el-form",{ref:"dataForm",attrs:{"label-position":"left","label-width":"70px"}},[e("ValidationProvider",{ref:"file",attrs:{name:"file",rules:"required"},scopedSlots:t._u([{key:"default",fn:function(n){var o=n.errors;return[e("el-form-item",{attrs:{prop:"file",error:t.messageError(t.configParameterPropertyFields.file,o[0])}},[e("div",{staticStyle:{display:"flex"}},[e("label",{staticStyle:{width:"100px"},attrs:{for:"excel"}},[t._v("Tải tệp lên"),e("span",{staticClass:"text-danger"},[t._v("*")])]),e("input",{ref:"excel-upload-input",staticClass:"form-control custom-file-input",attrs:{type:"file",accept:".xlsx, .xls"},on:{change:t.selected}})])])]}}],null,!0)})],1),e("div",{staticClass:"col-12 text-center"},[e("span",{staticStyle:{"margin-top":"-4px",color:"blue","text-decoration":"underline"},attrs:{href:"#",role:"button"},on:{click:t.handleExport_Example}},[t._v("Tải file mẫu tại đây")]),e("br"),t.validRequest<t.totalRequest?e("div",{staticClass:"box_import",staticStyle:{"text-align":"center"}},[e("span",{staticStyle:{color:"red"}},[t._v("Tổng số thuộc tính trùng mã trên hệ thống là "+t._s(t.duplicateCodeRequest)+" / "+t._s(t.totalRequest))]),e("br"),e("span",{staticStyle:{color:"red"}},[t._v("Tổng số thuộc tính mới hợp lệ là "+t._s(t.validRequest-t.duplicateCodeRequest)+" / "+t._s(t.totalRequest))]),e("br"),e("span",{staticStyle:{color:"red"}},[t._v("Bạn có chắc chắn muốn update các thuộc tình có mã đã tồn tại trên hệ thống ")]),e("br"),e("span",{staticStyle:{color:"red"}},[t._v(" và cập nhật thêm các thuộc tính mới hợp lệ vào hệ thống không?")])]):t._e(),e("br"),null!==t.totalRequest?e("div",[e("span",{staticStyle:{"margin-top":"-4px",color:"blue","text-decoration":"underline"},attrs:{href:"#",role:"button"},on:{click:t.handleExport_ResImport}},[t._v("Tải File kết quả Import tại đây")])]):t._e()]),e("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[e("el-button",{attrs:{type:"info",plain:""},on:{click:t.closeDialog}},[t._v("Đóng")]),null===t.totalRequest?e("el-button",{attrs:{type:"warning",plain:""},on:{click:function(e){return o(t.importData)}}},[t._v("Lưu")]):t._e(),null!==t.totalRequest?e("el-button",{attrs:{type:"warning",plain:""},on:{click:function(e){return t.forceImportData()}}},[t._v("Đồng ý")]):t._e()],1)],1)]}}])})},r=[],a=n("c7eb"),i=n("1da1"),s=(n("ac1f"),n("00b4"),n("b0c0"),n("d3b7"),n("3ca3"),n("ddb0"),n("99af"),n("d81d"),n("391d")),c=n("3081"),u=n("7bb1"),l=n("1724"),d=n("1146"),h=n.n(d),m={name:"ImportProperty",components:{ValidationObserver:u["a"],ValidationProvider:u["b"]},mixins:[c["a"],s["a"]],props:{dialogImportVisible:{type:Boolean,default:!1},parent:{type:Object,default:null}},data:function(){return{loading:!1,excelData:{header:null,results:{onsuccess:!1,num_success:null,total:null}},result_import:[],dataExcel:[],duplicateCodeRequest:0,validRequest:null,totalRequest:null,exampleDataExport:[{index:0,codeProperty:"codeProperty_EXAMPLE_01",nameProperty:"nameProperty_EXAMPLE_01"},{index:1,codeProperty:"codeProperty_EXAMPLE_02",nameProperty:"nameProperty_EXAMPLE_02"},{index:2,codeProperty:"codeProperty_EXAMPLE_03",nameProperty:"nameProperty_EXAMPLE_03"}]}},methods:{selected:function(t){var e=this;return Object(i["a"])(Object(a["a"])().mark((function n(){var o;return Object(a["a"])().wrap((function(n){while(1)switch(n.prev=n.next){case 0:return o=t.target.files,n.next=3,e.$refs.file.validate(o);case 3:case"end":return n.stop()}}),n)})))()},isExcel:function(t){return/\.(xlsx|xls)$/.test(t.name)},doneImport:function(){this.excelData.results.onsuccess=!0},closeDialog:function(){this.$emit("update:dialogImportVisible",!1)},importData:function(){var t=this,e=this.$refs["excel-upload-input"].files,n=e[0];n&&this.upload(n).then((function(e){if(null!==e&&void 0!==e&&e.length>0)for(var n=0;n<e.length;n++)e[n].idTypeConfig=t.parent.id;Object(l["d"])(e).then((function(n){if(t.result_import=n.data.configParameterPropertyImportList,t.validRequest=n.data.validRecord,t.totalRequest=n.data.totalRecord,null!==t.result_import&&void 0!==t.result_import&&t.result_import.length>0)for(var o=0;o<t.result_import.length;o++)3===t.result_import[o].statusCode&&(t.duplicateCodeRequest+=1,t.dataExcel.push(e[o]));t.totalRequest===t.validRequest&&(t.notifySuccess("Thông tin","Import thành công"),t.$emit("update:dialogImportVisible",!1))}))}))},forceImportData:function(){var t=this;Object(l["b"])(this.dataExcel).then((function(e){null!==e&&void 0!==e&&(t.notifySuccess("Thông tin","Import thành công"),t.$emit("update:dialogImportVisible",!1),t.$emit("reload"))}))},beforeUpload:function(t){var e=t.size/1024/1024<1;return!!e||(this.$message({message:"Please do not upload files larger than 1m in size.",type:"warning"}),!1)},handleClick:function(t){var e=t.target.files,n=e[0];n&&this.upload(n)},upload:function(t){return this.$refs["excel-upload-input"].value=null,this.readerData(t)},handleExport_Example:function(){var t=this;this.downloadLoading=!0,Promise.all([n.e("chunk-0d1c46e8"),n.e("chunk-09290bef")]).then(n.bind(null,"4bf8")).then((function(e){var n="";1===t.type?n="Lý do tăng hạng":2===t.type&&(n="Lý do giảm hạng");var o=["STT",n],r=["index","content"],a=t.formatJson(r,t.exampleDataExport),i="Example_File_Import_Rule_Change_Rank",s="xlsx";e.export_json_to_excel({header:o,data:a,filename:i,autoWidth:"true",bookType:s}),t.$notify.success({title:"Success",message:"".concat(i,".").concat(s," tải xuống thành công"),showClose:!1}),t.downloadLoading=!1}))},handleExport_ResImport:function(){var t=this;this.downloadLoading=!0,Promise.all([n.e("chunk-0d1c46e8"),n.e("chunk-09290bef")]).then(n.bind(null,"4bf8")).then((function(e){var n=["STT","Mã thuộc tính","Tên thuộc tính","Kết quả"],o=["index","codeProperty","nameProperty","statusCode"],r=t.result_import,a=t.formatJson(o,r),i=t.formatFilenameExport(),s="xlsx";e.export_json_to_excel({header:n,data:a,filename:i,autoWidth:"true",bookType:s}),t.$notify.success({title:"Success",message:"".concat(i,".").concat(s," tải xuống thành công"),showClose:!1}),t.downloadLoading=!1}))},getHeaderRow:function(t){var e,n=[],o=h.a.utils.decode_range(t["!ref"]),r=o.s.r;for(e=o.s.c;e<=o.e.c;++e){var a=t[h.a.utils.encode_cell({c:e,r:r})],i="UNKNOWN "+e;a&&a.t&&(i=h.a.utils.format_cell(a)),n.push(i)}return n},formatJson_Import:function(t,e,n){return e.map((function(e){for(var o=0;o<n.length;o++){var r=t[o],a=n[o];e[r]=e[a],delete e[a]}return e}))},formatJson:function(t,e){var n=this;return e.map((function(e,o){return t.map((function(t){return"index"===t?o+1:"statusCode"===t?n.renderResult(e[t]):e[t]}))}))},renderResult:function(t){if(!t)return"";var e="";switch(t){case 1:e="Bản ghi thỏa mãn";break;case 2:e="Mã thuộc tính bắt buộc nhập";break;case 3:e="Mã thuộc tính đã tồn tại. Cập nhật thông tin mới cho mã thuộc tính";break;case 4:e="Mã thuộc tính bị trùng";break;case 5:e="Mã thuộc tính sai định dạng";break;case 6:e="Tên thuộc tính bắt buộc nhập";break;case 7:e="Tên thuộc tính không được trùng tên thuộc tính trên hệ thống";break;case 8:e="Tên thuộc tính bị trùng";break}return e},formatFilenameExport:function(){var t=new Date;return"".concat(t.getFullYear()).concat(t.getMonth()+1).concat(t.getDate()).concat(t.getHours()).concat(t.getMinutes()).concat(t.getSeconds(),"_thuocTinhCauHinh")},convertObjectKey:function(t,e,n){return e.map((function(e){for(var o=0;o<n.length;o++){var r=t[o],a=n[o];e[r]=e[a],delete e[a],0===o&&delete e[r]}return e}))},readerData:function(t){var e=this;return this.loading=!0,new Promise((function(n,o){var r=new FileReader;r.onload=function(t){var o=t.target.result,r=h.a.read(o,{type:"array"}),a=r.SheetNames[0],i=r.Sheets[a],s=e.getHeaderRow(i),c=["id","codeProperty","nameProperty"],u=h.a.utils.sheet_to_json(i),l=e.convertObjectKey(c,u,s);e.loading=!1,n(l)},r.readAsArrayBuffer(t)}))}}},p=m,f=(n("0ec7"),n("2877")),g=Object(f["a"])(p,o,r,!1,null,"bca3b846",null);e["a"]=g.exports},"0ec7":function(t,e,n){"use strict";n("7431")},1:function(t,e){},1724:function(t,e,n){"use strict";n.d(e,"c",(function(){return r})),n.d(e,"a",(function(){return a})),n.d(e,"e",(function(){return i})),n.d(e,"d",(function(){return s})),n.d(e,"b",(function(){return c}));var o=n("b775");function r(t){return Object(o["a"])({url:"config-parameter-property",method:"post",data:t})}function a(t){return Object(o["a"])({url:"config-parameter-property/create",method:"post",data:t})}function i(t){return Object(o["a"])({url:"config-parameter-property/".concat(t.id),method:"put",data:t})}function s(t){return Object(o["a"])({url:"config-parameter-property/import",method:"post",data:t})}function c(t){return Object(o["a"])({url:"config-parameter-property/force-import",method:"post",data:t})}},2:function(t,e){},3:function(t,e){},3081:function(t,e,n){"use strict";var o=n("5530"),r=(n("d3b7"),n("25f0"),n("4c93")),a=n("7bb1");Object(a["c"])("required",Object(o["a"])(Object(o["a"])({},r["c"]),{},{message:" bắt buộc nhập"})),Object(a["c"])("requiredSelect",Object(o["a"])(Object(o["a"])({},r["c"]),{},{message:" bắt buộc chọn"})),Object(a["c"])("ext",Object(o["a"])(Object(o["a"])({},r["a"]),{},{message:" không đúng định dạng"})),Object(a["c"])("regex",Object(o["a"])(Object(o["a"])({},r["b"]),{},{message:" không đúng định dạng"})),Object(a["c"])("max",{validate:function(t,e){return t.toString().length<=e.length},params:["length"],message:" không vượt quá {length} ký tự"}),Object(a["c"])("isLower",{params:["target"],validate:function(t,e){var n=e.target;return!n||+t<+n},message:" phải nhỏ hơn chặn trên"}),e["a"]={data:function(){return{loginFields:{username:"Tên đăng nhập",password:"Mật khẩu"},approverFields:{unit:"Đơn vị",position:"Chức vụ",approver:"Họ và tên"},scorePeriodFields:{name:"Kỳ chấm điểm"},lendingFields:{type:"Loại chấm điểm",name:"Loại hình chấm điểm"},systemFields:{dept1:"Đơn vị",dept1_type:"Loại đơn vị",dept2:"Phòng ban",side:"Miền",name:"Tên",status:"Trạng thái",code:"Mã",position:"Chức vụ",file:"File"},customer_identificationFields:{code_tax:"Mã số thuế",code_reg:"Mã số đăng ký kinh doanh",name_dn:"Tên doanh nghiệp",name_dept:"Tên đơn vị quản lý",code_dept:"Mã đơn vị quản lý"},rank_adjustFields:{rule_change:"Quy tắc điều chỉnh",cause_change:"Nguyên nhân điều chỉnh",reason_change:"Lý do điều chỉnh"},functionsName:{title:"Tiêu đề",path:"Path",icon:"Icon",component:"Mã màn hình",priority:"Thứ tự"},economic_sbvFields:{codeSBV:"Mã ngành kinh tế SBV",nameSBV:"Tên ngành kinh tế SBV",requestChange:"Yêu cầu điều chỉnh",file:"File"},groupFCCFields:{code:"Mã ngành kinh tế FCC",name:"Tên ngành kinh tế FCC",sbv:"Ngành kinh tế SBV",css:"Nhóm ngành"},groupFCCImportFields:{file:"File"},matrixClassifyFields:{nameMatrix:"Tên ma trận",rules:"Loại quy tắc phân loại quy mô",tpBankRule:"Quy tắc phân loại TPBank",pointRule:"Quy tắc phân loại theo điểm chỉ tiêu",establishMatrix:"Thiết lập ma trận",requestChangeMatrix:"Lý do từ chối"},tpBankRuleFields:{name:"Tên quy tắc",unit:"Đơn vị báo cáo tài chính",sales:"Doanh thu",salesCriteria:"Doanh thu - Chọn tiêu chí",equity:"Vốn chủ sở hữu",equityCriteria:"Vốn chủ sở hữu - Chọn tiêu chí",configScalePointList:"Thiết lập điểm quy mô"},salesScalePointFields:{fromSign:"Dấu",fromValue:"Chặn dưới",toValue:"Chặn trên",toSign:"Dấu"},equityScalePointFields:{fromSign:"Dấu",fromValue:"Chặn dưới",toValue:"Chặn trên",toSign:"Dấu"},configScalePointFields:{size:"Size",scale:"Quy mô"},branches:{branchCode:"Mã đơn vị",branchCodeNumber:"Mã số đơn vị",branchTypeName:"Loại đơn vị",branchName:"Tên đơn vị",districtName:"Miền"},departments:{branchName:"Tên đơn vị",name:"Tên phòng ban"},positions:{branchName:"Tên đơn vị",name:"Tên chức vụ",departmentName:"Tên phòng ban"},groups:{name:"Tên nhóm",code:"Mã nhóm"},users:{groupName:"Tên nhóm",username:"Tên đăng nhập",name:"Tên nhân viên"},ruleChangeRankFields:{content:"Lý do"},singleScoringModelKHDNFields:{codeModel:"Mã mô hình đơn",nameModel:"Tên mô hình đơn",typeRank:"Loại xếp hạng",scaleClassify:"Phân loại quy mô",industryGroup:"Nhóm ngành",inputModel:"Tên mô hình nhập liệu",typeCode:"Loại code",fileCodeModel:"File code model",fileImport:"File",userCreated:"Người tạo",userApproved:"Người duyệt"},configParameterPropertyFields:{codeProperty:"Mã thuộc tính",nameProperty:"Tên thuộc tính",description:"Mô tả",file:"File"}}},methods:{messageError:function(t,e){if(void 0!==e)return t+e}}}},"391d":function(t,e,n){"use strict";var o=n("b4a5"),r={data:function(){return{loading:null}},methods:{showLoading:function(){var t=this;this.loading=this.$loading({lock:!0,text:"Đang tải"}),setTimeout((function(){t.hideLoading()}),5e4)},hideLoading:function(){this.loading.close()}}},a={data:function(){return{duration:3e3}},methods:{notifySuccess:function(t,e){this.$notify({title:t,message:e,type:"success",duration:this.duration,customClass:"loading-backgroup-success"})},notifyWarning:function(t,e){this.$notify({title:t,message:e,type:"warning",duration:this.duration,customClass:"loading-backgroup-warning"})},notifyInfo:function(t,e){this.$notify({title:t,message:e,type:"info",duration:this.duration,customClass:"loading-backgroup-info"})},notifyError:function(t,e){this.$notify({title:t,message:e,type:"error",duration:this.duration,customClass:"loading-backgroup-error"})}}},i=(n("d3b7"),n("25f0"),{data:function(){return{}},methods:{convertDateToServer:function(t,e){return""===t||void 0===t||null==t?"":this.$moment(t,e).tz(this.$moment.tz.guess(!0)).utc().format()},convertDateToLocal:function(t,e){return""===t||void 0===t||null==t?"":this.$moment.utc(t).parseZone(this.$moment.tz.guess(!0)).local().format(e)},convertDateToLocalUTC:function(t,e){return""===t||void 0===t||null==t?"":this.$moment.utc(t).format(e)},convertDateToAnotherFormat:function(t,e,n){return""===t||void 0===t?"":this.$moment(t,e).format(n)},ConvertTimeRanges:function(t){if(null!=t&&t.toString().length>0){var e=t.split(" to ");return this.TimeRangesModel.from=this.convertDateToAnotherFormat(e[0]+" 00:00:00","DD-MM-YYYY HH:mm:ss","YYYY-MM-DD[T]HH:mm:ss[Z]"),this.TimeRangesModel.to=this.convertDateToAnotherFormat(e[1]+" 23:59:59","DD-MM-YYYY HH:mm:ss","YYYY-MM-DD[T]HH:mm:ss[Z]"),this.TimeRangesModel}return this.TimeRangesModel.to=null,this.TimeRangesModel.from=null,this.TimeRangesModel},ConvertTimeFrom:function(t){return this.convertDateToAnotherFormat(t+" 00:00:00","DD-MM-YYYY HH:mm:ss","YYYY-MM-DD[T]HH:mm:ss[Z]")},ConvertTimeTo:function(t){return this.convertDateToAnotherFormat(t+" 23:59:59","DD-MM-YYYY HH:mm:ss","YYYY-MM-DD[T]HH:mm:ss[Z]")},ConvertTimeFromToDateJava:function(t){return t+" 00:00:00"},ConvertTimeToToDateJava:function(t){return t+" 23:59:59"}}}),s={methods:{hasPermission:function(t,e){return-1!==this.$store.getters.actions[null===t||void 0===t?void 0:t.toLowerCase()].indexOf(e)}}};e["a"]={mixins:[o["a"],r,a,i,s]}},7431:function(t,e,n){},b4a5:function(t,e,n){"use strict";e["a"]={data:function(){return{pagination:{pageNumber:1,pageSize:10,totalItems:0,totalPages:0},pageSizes:[10,20,50,100]}},methods:{}}},e08d:function(t,e,n){"use strict";n.d(e,"a",(function(){return r})),n.d(e,"b",(function(){return a})),n.d(e,"c",(function(){return i}));var o=n("b775");function r(t){return Object(o["a"])({url:"type-config-parameter",method:"post",data:t})}function a(t){return Object(o["a"])({url:"type-config-parameter/".concat(t),method:"get"})}function i(t){return Object(o["a"])({url:"type-config-parameter/".concat(t.id),method:"put",data:t})}}}]);