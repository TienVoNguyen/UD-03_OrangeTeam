(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-a0464eca"],{"036c":function(t,e,a){},"0c32":function(t,e,a){"use strict";var r=a("53ca"),n=a("c7eb"),o=a("1da1"),i=(a("a15b"),a("fb6a"),a("bf19"),a("d3b7"),a("25f0"),a("d81d"),a("cb29"),a("4e82"),a("a630"),a("3ca3"),a("ac1f"),a("5319"),a("ddb0"),a("2b3d"),a("9861"),a("6c0c"));e["a"]={data:function(){return{optionAll:{value:null,label:"--Tất cả--"},nowDate:new Date,currentMonth:0,currentYear:0,listAccount:null,currentDate:(new Date).toJSON().slice(0,10).split("-").reverse().join("/")}},created:function(){this.currentMonth=1===this.nowDate.getMonth().toString().length?"0"+(this.nowDate.getMonth()+1):this.nowDate.getMonth()+1,this.currentYear=this.nowDate.getFullYear()},methods:{getListAccount:function(){var t=this;return Object(o["a"])(Object(n["a"])().mark((function e(){var a,r;return Object(n["a"])().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return a={status:1,isDelete:0,isSale:-1,accountType:2},e.next=3,i["d"](a);case 3:r=e.sent,t.listAccount=r.data.map((function(t){return{value:t.id,label:t.username}})),t.listAccount.unshift(t.optionAll);case 6:case"end":return e.stop()}}),e)})))()},genYears:function(){var t=parseInt(this.nowDate.getFullYear()),e=parseInt(t)-10,a=Array(t-e+1).fill().map((function(t,a){return{value:e+a,label:e+a}}));return a.sort((function(t,e){return e.value-t.value})),a},genMonths:function(){var t=Array.from({length:12},(function(t,e){return{value:1===(e+1).toString().length?"0"+(e+1):e+1,label:1===(e+1).toString().length?"0"+(e+1):e+1}}));return t},handleCurrentChange:function(t){this.pagination.pageNumber=t,this.getData()},handleSizeChange:function(t){this.pagination.pageSize=t,this.getData()},isEmpty:function(t){return!t||0===t.length},convertMessage:function(t){var e=t;return"success"===t&&(e="Lấy dữ liệu thành công"),e},convertDateObjectToString:function(t){return"object"===Object(r["a"])(t)?t.toJSON().slice(0,10).replace(/-/g,"-"):t},convertDate:function(t){return this.convertDateToLocalUTC(t,"DD/MM/YYYY HH:mm:ss")},formatNumber:function(t,e,a,r){return a&&(a=Math.round(100*a)/100),a?a.toString().replace(/(\d)(?=(\d{3})+(?!\d))/g,"$1,"):0},downloadExcel:function(t,e){var a=window.URL.createObjectURL(new Blob([t])),r=document.createElement("a");r.href=a;var n=e;r.setAttribute("download",n),document.body.appendChild(r),r.click()}}}},"343a":function(t,e,a){"use strict";var r=a("1157"),n=a.n(r);e["a"]={data:function(){return{pageTitle:null}},created:function(){},mounted:function(){this.pageTitle=n()(".router-link-active li span")[0].innerText,this.equalWidthLabel()},methods:{getTitle:function(){return n()(".router-link-active li span")[0].innerText},equalWidthLabel:function(){var t=n()(".label-custom"),e=0;t.each((function(){n()(this).width()>e&&(e=n()(this).width())})),n()(".label-custom").width(e)},isNullorEmpty:function(t){return null===t||""===t||void 0===t}}}},"359f":function(t,e,a){"use strict";a("036c")},"391d":function(t,e,a){"use strict";var r=a("b4a5"),n={data:function(){return{loading:null}},methods:{showLoading:function(){var t=this;this.loading=this.$loading({lock:!0,text:"Đang tải"}),setTimeout((function(){t.hideLoading()}),5e4)},hideLoading:function(){this.loading.close()}}},o={data:function(){return{duration:3e3}},methods:{notifySuccess:function(t,e){this.$notify({title:t,message:e,type:"success",duration:this.duration,customClass:"loading-backgroup-success"})},notifyWarning:function(t,e){this.$notify({title:t,message:e,type:"warning",duration:this.duration,customClass:"loading-backgroup-warning"})},notifyInfo:function(t,e){this.$notify({title:t,message:e,type:"info",duration:this.duration,customClass:"loading-backgroup-info"})},notifyError:function(t,e){this.$notify({title:t,message:e,type:"error",duration:this.duration,customClass:"loading-backgroup-error"})}}},i=(a("d3b7"),a("25f0"),{data:function(){return{}},methods:{convertDateToServer:function(t,e){return""===t||void 0===t||null==t?"":this.$moment(t,e).tz(this.$moment.tz.guess(!0)).utc().format()},convertDateToLocal:function(t,e){return""===t||void 0===t||null==t?"":this.$moment.utc(t).parseZone(this.$moment.tz.guess(!0)).local().format(e)},convertDateToLocalUTC:function(t,e){return""===t||void 0===t||null==t?"":this.$moment.utc(t).format(e)},convertDateToAnotherFormat:function(t,e,a){return""===t||void 0===t?"":this.$moment(t,e).format(a)},ConvertTimeRanges:function(t){if(null!=t&&t.toString().length>0){var e=t.split(" to ");return this.TimeRangesModel.from=this.convertDateToAnotherFormat(e[0]+" 00:00:00","DD-MM-YYYY HH:mm:ss","YYYY-MM-DD[T]HH:mm:ss[Z]"),this.TimeRangesModel.to=this.convertDateToAnotherFormat(e[1]+" 23:59:59","DD-MM-YYYY HH:mm:ss","YYYY-MM-DD[T]HH:mm:ss[Z]"),this.TimeRangesModel}return this.TimeRangesModel.to=null,this.TimeRangesModel.from=null,this.TimeRangesModel},ConvertTimeFrom:function(t){return this.convertDateToAnotherFormat(t+" 00:00:00","DD-MM-YYYY HH:mm:ss","YYYY-MM-DD[T]HH:mm:ss[Z]")},ConvertTimeTo:function(t){return this.convertDateToAnotherFormat(t+" 23:59:59","DD-MM-YYYY HH:mm:ss","YYYY-MM-DD[T]HH:mm:ss[Z]")},ConvertTimeFromToDateJava:function(t){return t+" 00:00:00"},ConvertTimeToToDateJava:function(t){return t+" 23:59:59"}}}),s={methods:{hasPermission:function(t,e){return-1!==this.$store.getters.actions[null===t||void 0===t?void 0:t.toLowerCase()].indexOf(e)}}};e["a"]={mixins:[r["a"],n,o,i,s]}},"6c0c":function(t,e,a){"use strict";a.d(e,"f",(function(){return d})),a.d(e,"e",(function(){return p})),a.d(e,"g",(function(){return m})),a.d(e,"b",(function(){return f})),a.d(e,"a",(function(){return g})),a.d(e,"c",(function(){return v})),a.d(e,"d",(function(){return b}));var r=a("b775"),n=(a("d3b7"),a("bc3a")),o=a.n(n),i=a("5c96"),s=a("4360"),c=a("5f87"),l=a("a18c"),u=o.a.create({baseURL:"/api/",timeout:65e3});u.interceptors.request.use((function(t){return s["a"].getters.token&&(t.headers["Authorization"]="Bearer "+Object(c["a"])(),t.headers["portal"]=1,t.headers["Content-Type"]="application/json",t.responseType="arraybuffer"),t}),(function(t){return console.log(t),Promise.reject(t)})),u.interceptors.response.use((function(t){var e=t.data;return e}),(function(t){return console.log("err"+t),Object(i["Message"])({message:t.response.data.message,type:"error",duration:5e3}),401===t.response.data.code&&(Object(c["b"])(),l["b"].push({path:"/"})),403===t.response.data.code&&l["b"].push({path:"/"}),Promise.reject(t)}));var h=u;function d(t){return Object(r["a"])({url:"model/public/BRNToolCoreAPI/BRNToolCoreAPI/api/ReportOrderFailOver/ReportOrderFailOver",method:"post",data:t})}function p(t){return Object(r["a"])({url:"model/public/BRNToolCoreAPI/BRNToolCoreAPI/api/ReportOrderFailOver/ReportOrderFailOverCampaign",method:"post",data:t})}function m(t){return Object(r["a"])({url:"model/public/BRNToolCoreAPI/BRNToolCoreAPI/api/ReportOrderFailOver/ReportOrderFailOverDetail",method:"post",data:t})}function f(t){return h({url:"model/public/BRNToolCoreAPI/BRNToolCoreAPI/api/ReportOrderFailOver/ExportReportOrderFailOver",method:"post",data:t})}function g(t){return h({url:"model/public/BRNToolCoreAPI/BRNToolCoreAPI/api/ReportOrderFailOver/ExportReportCamPaignOrderFailOver",method:"post",data:t})}function v(t){return h({url:"model/public/BRNToolCoreAPI/BRNToolCoreAPI/api/ReportOrderFailOver/ExportReportOrderFailOverDetail",method:"post",data:t})}function b(t){return Object(r["a"])({url:"model/public/PortalAPI/PortalAPI/api/sysAccounts/search",method:"post",data:t})}},"81d5":function(t,e,a){"use strict";var r=a("7b0b"),n=a("23cb"),o=a("50c4");t.exports=function(t){var e=r(this),a=o(e.length),i=arguments.length,s=n(i>1?arguments[1]:void 0,a),c=i>2?arguments[2]:void 0,l=void 0===c?a:n(c,a);while(l>s)e[s++]=t;return e}},9468:function(t,e,a){"use strict";a.r(e);a("ac1f"),a("841c"),a("b0c0");var r=function(){var t=this,e=t._self._c;return e("div",{staticClass:"app-container"},[e("div",{staticClass:"page-title"},[t._v(t._s(t.pageTitle))]),e("div",{staticClass:"col-sm-12 row"},[e("div",{staticClass:"col-sm-3"},[e("span",{},[t._v("Tài khoản")]),e("div",[e("el-select",{staticClass:"w-100",attrs:{placeholder:"Chọn tài khoản",filterable:""},model:{value:t.search.account,callback:function(e){t.$set(t.search,"account",e)},expression:"search.account"}},t._l(t.listAccount,(function(t){return e("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})})),1)],1)]),e("div",{staticClass:"col-sm-6"},[t._m(0),e("div",{staticClass:"col-sm-12 d-flex justify-content-center position-relative"},[e("el-date-picker",{staticStyle:{width:"40%"},attrs:{placeholder:"Từ ngày",type:"date","value-format":"yyyy-MM-dd",format:"dd/MM/yyyy"},on:{focus:function(e){return t.setDefaultFromDate()}},model:{value:t.search.fromDate,callback:function(e){t.$set(t.search,"fromDate",e)},expression:"search.fromDate"}}),e("i",{staticClass:"el-icon-minus font-weight-bold",staticStyle:{padding:"1% 2% 0 2%"}}),t._m(1),e("el-date-picker",{staticStyle:{width:"40%"},attrs:{placeholder:"Đến ngày",type:"date",format:"dd/MM/yyyy","value-format":"yyyy-MM-dd"},on:{focus:function(e){return t.setDefaultToDate()}},model:{value:t.search.toDate,callback:function(e){t.$set(t.search,"toDate",e)},expression:"search.toDate"}})],1)]),e("div",{staticClass:"col-sm-3"},[e("span",{},[t._v("Chiến dịch")]),e("el-input",{staticStyle:{width:"86%"},attrs:{placeholder:"Nhập tên chiến dịch"},nativeOn:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.searchF.apply(null,arguments)}},model:{value:t.search.campaign,callback:function(e){t.$set(t.search,"campaign",e)},expression:"search.campaign"}})],1),e("div",{staticClass:"col-sm-12 d-flex justify-content-center pt-4"},[e("el-button",{attrs:{icon:"el-icon-search",type:"primary",plain:""},on:{click:t.searchF}},[t._v("Tìm kiếm")]),t.hasPermission(t.$options.name,"ReportFailoverDetail.ExportExcel")?e("el-button",{attrs:{type:"success",plain:""},on:{click:function(e){return t.exportData()}}},[t._v(" Xuất Excel ")]):t._e(),e("el-button",{attrs:{icon:"el-icon-refresh",type:"warning",plain:""},on:{click:function(e){return t.removeFilter()}}},[t._v("Bỏ lọc")])],1),e("div",{staticClass:"pt-4"},[e("el-table",{directives:[{name:"horizontal-scroll",rawName:"v-horizontal-scroll",value:"always",expression:"'always'"}],staticStyle:{width:"100%"},attrs:{data:t.items,border:""}},t._l(t.headers,(function(t){return e("el-table-column",{key:t.prop,attrs:{label:t.label,prop:t.prop,formatter:t.formatter,"min-width":t.width,align:t.align,"header-align":"center"}})})),1)],1),e("div",{staticClass:"mt-4 d-block float-right text-right"},[e("el-pagination",{attrs:{"current-page":t.pagination.pageNumber,"page-size":t.pagination.pageSize,"page-sizes":t.pageSizes,layout:"sizes,prev, pager, next, total",total:t.pagination.totalItems},on:{"update:currentPage":function(e){return t.$set(t.pagination,"pageNumber",e)},"update:current-page":function(e){return t.$set(t.pagination,"pageNumber",e)},"size-change":t.handleSizeChange,"current-change":t.handleCurrentChange}})],1)])])},n=[function(){var t=this,e=t._self._c;return e("span",{staticStyle:{"padding-left":"7%"}},[t._v(" Ngày gửi từ "),e("i",{staticClass:"required"},[t._v("*")])])},function(){var t=this,e=t._self._c;return e("span",{staticClass:"to-date"},[t._v("đến "),e("i",{staticClass:"required"},[t._v("*")])])}],o=a("c7eb"),i=a("1da1"),s=(a("498a"),a("d3b7"),a("25f0"),a("159b"),a("391d")),c=a("0c32"),l=a("343a"),u=a("6c0c"),h=a("5eda"),d=a.n(h),p=a("0900"),m={name:"ReportFailoverDetail",directives:{horizontalScroll:d.a},mixins:[s["a"],c["a"],l["a"]],data:function(){var t=this;return{itemsTest:[{accountName:"BiBo",campaignName:"BIBO_C",trafficSource:"API",brandname:"123456",from:"266548996578556",to:"8498576624456",messageId:"554998-agigresd-12224",sendDate:"01/10/2021 18:00:00",telco:"Viettel",timeSetup:50,statusFailover:"Success",statusTelco:"Success",errorCode:"00",errorName:"Success",responseDate:"01/10/2021 19:00:00",mt:2,method:"Zalo"},{accountName:"VanThanh",campaignName:"VanThanh_C",trafficSource:"API",brandname:"5697746",from:"266548996578556",to:"8498576624456",messageId:"554998-oeiirir-12224",sendDate:"01/10/2021 18:00:00",telco:"Mobifone",timeSetup:50,statusFailover:"Failed",statusTelco:"Failed",errorCode:"06",errorName:"Expired time",responseDate:"01/10/2021 19:00:00",mt:2,method:"Zalo"},{accountName:"TranBinh",campaignName:"TranBinh_C",trafficSource:"API",brandname:"5669876",from:"266548996578556",to:"8498576622524456",messageId:"554998-ahdhrty-12224",sendDate:"01/10/2021 18:00:00",telco:"Vinaphone",timeSetup:15,statusFailover:"Success",statusTelco:"Failed",errorCode:"07",errorName:"System Error",responseDate:"01/10/2021 19:00:00",mt:2,method:"Viber"},{accountName:"CongKhiem",campaignName:"CongKhiem_C",trafficSource:"API",brandname:"123456",from:"266548996578556",to:"849857669988",messageId:"554998-Xyz-12224",sendDate:"01/10/2021 18:00:00",telco:"Viettel",timeSetup:50,statusFailover:"Success",statusTelco:"Success",errorCode:"00",errorName:"Success",responseDate:"01/10/2021 19:00:00",mt:2,method:"SMS"}],items:[],search:{fromDate:null,toDate:null,campaign:null,account:null},headers:[{label:"STT",prop:"stt",formatter:null,width:50},{label:"Account Name",prop:"accountName",formatter:null,width:120},{label:"Campaign Name",prop:"campaignName",formatter:null,width:100},{label:"Traffic Source",prop:"trafficSource",formatter:null},{label:"From",prop:"from",formatter:null},{label:"To",prop:"to",formatter:null,width:150},{label:"Message Id",prop:"messageId",formatter:null},{label:"Send Date",prop:"sendDate",formatter:function(e){return t.convertDate(e.sendDate)},width:150,align:"center"},{label:"Telco",prop:"telco",formatter:null},{label:"Time Setup (s)",prop:"timeSetup",formatter:null},{label:"Status Failover",prop:"statusFailover",formatter:null},{label:"Status Telco",prop:"statusTelco",formatter:null},{label:"Error Code",prop:"errorCode",formatter:null,width:300},{label:"Error Name",prop:"errorName",formatter:null},{label:"Response Date",prop:"responseDate",formatter:function(e){return t.convertDate(e.sendDate)},width:150,align:"center"},{label:"MT",prop:"mt",formatter:null},{label:"Method",prop:"method",formatter:null}]}},watch:{"pagination.pageSize":function(t,e){this.pagination.pageSize=t,this.pagination.pageNumber=1,this.getData()}},created:function(){var t=this.nowDate;this.nowDate.setDate(this.nowDate.getDate()-7),this.search.fromDate=t,this.search.toDate=new Date,this.getData(),this.getListAccount()},methods:{getData:function(){var t=this;return Object(i["a"])(Object(o["a"])().mark((function e(){var a,r,n;return Object(o["a"])().wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(t.validateSearchInput()){e.next=2;break}return e.abrupt("return");case 2:return a={fromDate:t.search.fromDate,toDate:t.search.toDate,accountId:t.search.account,campaignCode:t.isNullorEmpty(t.search.campaign)?t.search.campaign:t.search.campaign.toString().trim(),pageIndex:t.pagination.pageNumber,pageSize:t.pagination.pageSize},t.showLoading(),e.next=6,u["g"](a);case 6:r=e.sent,200===r.code&&(t.items=r.data.result,n=t,t.items.forEach((function(t,e){t.stt=(n.pagination.pageNumber-1)*n.pagination.pageSize+e+1})),t.pagination.totalItems=r.data.totalRecord,t.hideLoading());case 8:case"end":return e.stop()}}),e)})))()},exportData:function(){var t=this;return Object(i["a"])(Object(o["a"])().mark((function e(){var a,r;return Object(o["a"])().wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(t.validateSearchInput()){e.next=2;break}return e.abrupt("return");case 2:return a={fromDate:t.search.fromDate,toDate:t.search.toDate,accountId:t.search.account,campaignCode:t.isNullorEmpty(t.search.campaign)?t.search.campaign:t.search.campaign.toString().trim(),pageIndex:1,pageSize:999999},t.showLoading(),e.next=6,u["c"](a);case 6:r=e.sent,t.downloadExcel(r,"BaoCaoLogDetailFailOver.xlsx"),t.hideLoading();case 9:case"end":return e.stop()}}),e)})))()},searchF:function(){this.pagination.pageNumber=1,this.getData()},removeFilter:function(){this.pagination={pageNumber:1,pageSize:10,totalItems:0,totalPages:0},this.search={fromDate:this.nowDate,toDate:new Date,accountId:null,campaignCode:null},this.getData()},validateSearchInput:function(){return this.isEmpty(this.search.fromDate)?(this.notifyWarning("Cảnh báo",p["a"].from_date_empty),!1):this.isEmpty(this.search.toDate)?(this.notifyWarning("Cảnh báo",p["a"].to_date_empty),!1):!(null!=this.search.fromDate&&null!=this.search.toDate&&this.convertDateObjectToString(this.search.fromDate)>this.convertDateObjectToString(this.search.toDate))||(this.notifyWarning("Cảnh báo",p["a"].from_date_bigger_to_date),!1)},setDefaultFromDate:function(){var t=new Date;t.setDate(t.getDate()-7);var e=t;if(this.convertDateObjectToString(this.search.fromDate)===this.convertDateObjectToString(e))this.search.fromDate=t;else{var a=this.search.fromDate,r=Date.parse(a),n=new Date(r);this.convertDateObjectToString(this.search.fromDate)===this.convertDateObjectToString(a)&&(this.search.fromDate=n)}},setDefaultToDate:function(){var t=new Date,e=t;if(this.convertDateObjectToString(this.search.toDate)===this.convertDateObjectToString(e))this.search.toDate=t;else{var a=this.search.toDate,r=Date.parse(a),n=new Date(r);this.convertDateObjectToString(this.search.toDate)===this.convertDateObjectToString(a)&&(this.search.toDate=n)}}}},f=m,g=(a("359f"),a("2877")),v=Object(g["a"])(f,r,n,!1,null,"7a015fba",null);e["default"]=v.exports},b4a5:function(t,e,a){"use strict";e["a"]={data:function(){return{pagination:{pageNumber:1,pageSize:10,totalItems:0,totalPages:0},pageSizes:[10,20,50,100]}},methods:{}}},bf19:function(t,e,a){"use strict";var r=a("23e7");r({target:"URL",proto:!0,enumerable:!0},{toJSON:function(){return URL.prototype.toString.call(this)}})},cb29:function(t,e,a){var r=a("23e7"),n=a("81d5"),o=a("44d2");r({target:"Array",proto:!0},{fill:n}),o("fill")}}]);