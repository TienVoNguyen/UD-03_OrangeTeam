(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-4fc34176"],{"6fa9":function(e,t,a){"use strict";a("7ccd")},"7ccd":function(e,t,a){},9755:function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e._self._c;return t("div",{staticClass:"fluid-container mx-5 mt-1"},[t("el-tabs",{ref:"eltab",staticClass:"vh-90",attrs:{stretch:!0},on:{"tab-click":e.handleClickTab},model:{value:e.activeName,callback:function(t){e.activeName=t},expression:"activeName"}},[t("el-tab-pane",{attrs:{label:"Bảng cân đối kế toán",name:"balanceSheet"}},[t("div",{staticClass:"d-block float-right pb-5"},[t("el-button",{attrs:{type:"css-success"},on:{click:e.exportData}},[e._v("EXPORT")])],1),t("custom-table-vue",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],attrs:{"table-data":e.tableData,"table-header":e.balanceSheetHeader,height:e.tableHeight},on:{filter:e.handleFilter}})],1),t("el-tab-pane",{attrs:{label:"Báo cáo kết quả kinh doanh",name:"financialState"}},[t("div",{staticClass:"d-block float-right pb-5"},[t("el-button",{attrs:{type:"css-success"},on:{click:e.exportData}},[e._v("EXPORT")])],1),t("custom-table-vue",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],attrs:{"table-data":e.tableData,"table-header":e.financialStateHeader,height:e.tableHeight},on:{filter:e.handleFilter}})],1),t("el-tab-pane",{attrs:{label:"Báo cáo lưu chuyển tiền tệ",name:"cashFlowStatement"}},[t("div",{staticClass:"d-block float-right pb-5"},[t("el-button",{attrs:{type:"css-success"},on:{click:e.exportData}},[e._v("EXPORT")])],1),t("custom-table-vue",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],attrs:{"table-data":e.tableData,"table-header":e.cashFlowStatementHeader,height:e.tableHeight},on:{filter:e.handleFilter}})],1)],1)],1)},r=[],l=a("5530"),i=a("c7eb"),c=a("1da1"),o=(a("b0c0"),a("4de4"),a("d3b7"),a("3ca3"),a("ddb0"),a("2b3d"),a("9861"),function(){var e=this,t=e._self._c;return t("el-table",{attrs:{data:e.tableData,border:"",stripe:"",height:e.height-30}},e._l(e.tableHeader,(function(a){return t("el-table-column",{key:a.prop,attrs:{prop:a.prop,label:a.label,"render-header":e.customizeHeader,"min-width":a.width,"show-overflow-tooltip":!0}})})),1)}),s=[],h=(a("a9e3"),a("159b"),a("ac1f"),a("841c"),a("2ef0")),u={name:"CustomTable",props:{tableData:{type:Array,default:function(){return[]}},tableHeader:{type:Array,default:function(){return[]}},height:{type:Number,default:0},loading:{type:Boolean,default:!0}},data:function(){return{search:{},count:0}},watch:{search:{handler:function(e){this.handleInputChange(e)},deep:!0}},created:function(){var e=this;this.tableHeader.forEach((function(t){e.$set(e.search,t.prop,"")}))},methods:{handleInputChange:h["debounce"]((function(e){this.$emit("filter",e)}),600),customizeHeader:function(e,t){var a=this,n=(t.column,t.$index),r=this.$createElement,l=this.$props.tableHeader[n];return r("div",[r("div",{class:"d-block c-header text-center"},[r("span",[l.label])]),l.hasSearch?r("el-input",{attrs:{"suffix-icon":"el-icon-search",placeholder:"Tìm kiếm",input:this.handleInputChange},model:{value:a.search[l.prop],callback:function(e){a.$set(a.search,l.prop,e)}}}):r("div",[" ",r("div",{style:"height: 36px"})," "])])},handleEvent:function(e,t){}}},d=u,b=(a("afe3"),a("2877")),p=Object(b["a"])(d,o,s,!1,null,"2069f0ad",null),f=p.exports,m={data:function(){return{tableData:[],balanceSheetHeader:[{label:"Chỉ tiêu",prop:"variable",width:"25%",hasSearch:!0},{label:"Mã số năm T",prop:"varCode",width:"8%",hasSearch:!0},{label:"Mã số năm T-1",prop:"preVarCode",width:"8%",hasSearch:!0},{label:"Rule năm T",prop:"rule",width:"35%"},{label:"Rule năm T-1",prop:"preRule",width:"35%"}],financialStateHeader:[{label:"Chỉ tiêu",prop:"variable",width:"25%",hasSearch:!0},{label:"Mã số năm T",prop:"varCode",width:"8%",hasSearch:!0},{label:"Mã số năm T-1",prop:"preVarCode",width:"8%",hasSearch:!0},{label:"Rule năm T",prop:"rule",width:"35%"},{label:"Rule năm T-1",prop:"preRule",width:"35%"}],cashFlowStatementHeader:[{label:"Chỉ tiêu",prop:"variable",width:"100",hasSearch:!0},{label:"Mã số",prop:"varCode",width:"100",hasSearch:!0},{label:"Rule",prop:"rule",width:"100"}]}}},v=a("b4a5"),g=a("b775");function w(e){return Object(g["a"])({url:"/variables",method:"get",params:e})}function S(e){return Object(g["a"])({url:"/variables/export",method:"post",data:e,responseType:"blob"})}var T={name:"EnterpriseFinancialStatuement",components:{CustomTableVue:f},mixins:[m,v["a"]],data:function(){return{activeName:"balanceSheet",tableHeight:0,filter:{variable:"",varCode:"",preVarCode:""},loading:!0}},created:function(){var e=this;return Object(c["a"])(Object(i["a"])().mark((function t(){return Object(i["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.fetchDataTable();case 2:e.tableHeight=e.calculateHeightTable();case 3:case"end":return t.stop()}}),t)})))()},mounted:function(){window.addEventListener("resize",this.handleResize)},methods:{handleSizeChange:function(e){console.log("".concat(e," items per page"))},handleCurrentChange:function(e){console.log("current page: ".concat(e))},handleClickTab:function(e,t){this.activeName=e.$props.name,this.fetchDataTable()},convertTypeOfTab:function(e){switch(e){case"balanceSheet":return 1;case"financialState":return 2;case"cashFlowStatement":return 3;default:return 1}},getHeaderByNameTab:function(e){switch(e){case"balanceSheet":return this.balanceSheetHeader;case"financialState":return this.financialStateHeader;case"cashFlowStatement":return this.cashFlowStatementHeader;default:return this.balanceSheetHeader}},getNameFileByNameTab:function(e){switch(e){case"balanceSheet":return"Bảng cân đối kế toán";case"financialState":return"Báo cáo kết quả kinh doanh";case"cashFlowStatement":return"Báo cáo lưu chuyển tiền tệ";default:return"Bảng cân đối kế toán"}},handleResize:function(){this.tableHeight=this.calculateHeightTable()},calculateHeightTable:function(){var e=this.$refs.eltab.$el.clientHeight,t=this.$refs.eltab.$el.children[0].clientHeight,a=this.$refs.eltab.$el.children[1].children[0].children[0].clientHeight;return e-t-a},fetchDataTable:function(){var e=this;return Object(c["a"])(Object(i["a"])().mark((function t(){var a;return Object(i["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.loading=!0,t.next=3,w(Object(l["a"])({type:e.convertTypeOfTab(e.activeName)},e.filter));case 3:a=t.sent,e.tableData=a.data.result,e.loading=!1;case 6:case"end":return t.stop()}}),t)})))()},handleFilter:function(e){this.filter=Object(l["a"])({},e),this.fetchDataTable()},exportData:function(){var e=this;return Object(c["a"])(Object(i["a"])().mark((function t(){var a,n,r;return Object(i["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,S({type:e.convertTypeOfTab(e.activeName),fileName:"".concat(e.getNameFileByNameTab(e.activeName),".csv"),headers:e.getHeaderByNameTab(e.activeName)});case 2:a=t.sent,n=window.URL.createObjectURL(new Blob([a])),r=document.createElement("a"),r.href=n,r.setAttribute("download","".concat(e.getNameFileByNameTab(e.activeName),".csv")),document.body.appendChild(r),r.click(),document.body.removeChild(r),window.URL.revokeObjectURL(n);case 11:case"end":return t.stop()}}),t)})))()}}},H=T,k=(a("6fa9"),Object(b["a"])(H,n,r,!1,null,"7c56fae0",null));t["default"]=k.exports},afe3:function(e,t,a){"use strict";a("c265")},b4a5:function(e,t,a){"use strict";t["a"]={data:function(){return{pagination:{pageNumber:1,pageSize:10,totalItems:0,totalPages:0},pageSizes:[10,20,50,100]}},methods:{}}},c265:function(e,t,a){}}]);